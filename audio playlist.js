var cincopa=cincopa||{};cincopa.baseTimer=cincopa.baseTimer||new Date();cincopa.isnull=function(b){return typeof b=="undefined"||b==null||b==""};cincopa.inBetween=function(e,d,b){var c=e.indexOf(d);if(c==-1){return null}var f=e.indexOf(b,c+d.length);if(f==-1||(b==null||b=="")){return e.substr(c+d.length)}return e.substr(c+d.length,f-c-d.length)};cincopa.short_ua=function(){var b="desk";var c=navigator.userAgent.toLowerCase();if(c.indexOf("ipad")>-1){b="ipad"}else{if(c.indexOf("iphone")>-1){b="iphone"}else{if(c.indexOf("android")>-1){b="android"}}}return b}();cincopa.traceit=function(d,b){try{d="["+(Math.round(((new Date()).getTime()-cincopa.baseTimer)/100)/10)+"] "+d;if(typeof d=="object"){console.dir(d,b)}else{console.log(d,b)}}catch(c){}};cincopa.json_stringify=JSON.stringify||(function(){var b=document.createElement("iframe");document.body.appendChild(b);var c=b.contentWindow.JSON;document.body.removeChild(b);return c.stringify})();cincopa.json_parse=JSON.parse||(function(){var b=document.createElement("iframe");document.body.appendChild(b);var c=b.contentWindow.JSON;document.body.removeChild(b);return c.parse})();cincopa.send_beacon=function(c){var d=new XMLHttpRequest();var b="";if(cincopa.analytics_filter_ip){b+="&analytics_filter_ip="+cincopa.analytics_filter_ip}if(cincopa.analytics_anonymize_ip){b+="&analytics_anonymize_ip="+cincopa.analytics_anonymize_ip}if(b!=""){c+=(c.indexOf("?")>-1?"":"?")+b}d.open("get",c,true);d.send()};cincopa.trace=function(c,b){b=b||"";if(!window.console||!window.cincopa._debug){return}cincopa.traceit(c,b)};cincopa.get_root_loader=function(){var b=document.getElementsByTagName("script");for(var d=b.length-1;d>=0;d--){var c=b[d].src.indexOf("libasync");if(c>-1){var e=b[d].src.substring(0,c);return e}}return parent.location.protocol+"//rtcdn.cincopa.com/"};cincopa.location_blocked=function(){try{if(parent.location.href){return false}}catch(b){}return true}();cincopa.is_ie=function(){return navigator.userAgent.match(/MSIE/)||!!navigator.userAgent.match(/Trident.*rv\:11\./)};cincopa.hasTouch=function(){var b=navigator.userAgent.toLowerCase();return("ontouchstart" in window&&b.match(/chrome/gi)===null)||("ontouchstart" in window&&b.match(/chrome/gi)!==null&&/android|iphone|ipad|ipod/i.test(b))};cincopa.copyToClipboard=function(e,d){if(navigator.userAgent.indexOf("Chrome")!=-1||navigator.userAgent.indexOf("Firefox")!=-1){var c={intercept:false,hook:function(f){if(c.intercept){f.preventDefault();f.clipboardData.setData("text/plain",e);f.clipboardData.setData("text/html",e);c.intercept=false}}};window.addEventListener("copy",c.hook);c.intercept=true;document.execCommand("copy");window.removeEventListener("copy",c.hook)}else{var b=d.createElement("input");b.setAttribute("value",e);d.body.appendChild(b);b.select();d.execCommand("copy");d.body.removeChild(b)}};cincopa.location=function(){if(cincopa.location_blocked){return document.referrer}else{return parent.location.href}}();cincopa.disable_analytics=cincopa.disable_analytics||false;cincopa.analytics_filter_ip=cincopa.analytics_filter_ip||null;cincopa.analytics_anonymize_ip=cincopa.analytics_anonymize_ip||null;cincopa.disable_cdn=cincopa.disable_cdn||false;cincopa._debug=cincopa._debug||(cincopa.inBetween(location.search,"cpdebug=","&")=="true")||(cincopa.inBetween(document.cookie,"cpdebug=",";")=="true");cincopa.registeredFunctions=cincopa.registeredFunctions||[];cincopa.registerEvent=cincopa.registerEvent||function(b,c){for(p in this.registeredFunctions){if(this.registeredFunctions[p].func==b&&this.registeredFunctions[p].filter==c){return}}this.registeredFunctions.push({func:b,filter:c})};if(!String.prototype.startsWith){String.prototype.startsWith=function(c,b){b=b||0;return this.indexOf(c,b)===b};String.prototype.endsWith=function(b){return this.indexOf(b,this.length-b.length)!==-1}}cincopa._ROOT_LOADER=cincopa._ROOT_LOADER||cincopa.get_root_loader();cincopa._ROOT_PROTOCOL=cincopa._ROOT_PROTOCOL||function(){var b=cincopa._ROOT_LOADER.indexOf("://");return cincopa._ROOT_LOADER.substring(0,b+1)}();cincopa._ROOT_ANALYTICS=cincopa._ROOT_ANALYTICS||cincopa._ROOT_PROTOCOL+"//analytics.cincopa.com";cincopa._ROOT_LOADER_STATIC=cincopa._ROOT_LOADER_STATIC||function(e){var d="https:";var c=e.substring(e.indexOf("cincopa.com/")+11);try{if(parent.location.protocol!="https:"&&parent.location.protocol){d="http:"}}catch(b){d=e.substring(0,e.indexOf("//"))}if(cincopa.disable_cdn){return d+"//www.cincopa.com"+c}else{if(d=="http:"){return d+"//wwwcdn.cincopa.com"+c}else{return d+"//wwwcdn.cincopa.com"+c}}}(cincopa._ROOT_LOADER);cincopa._AJAX=cincopa._AJAX||cincopa._ROOT_LOADER_STATIC.replace("/runtime/","/runtimeze/");cincopa._HOST=cincopa._HOST||cincopa._ROOT_LOADER_STATIC.replace("/runtime/","/runtimeze/");cincopa._JSON=cincopa._JSON||cincopa._AJAX+"json.aspx";cincopa._JSONV2=cincopa._JSONV2||(cincopa._ROOT_PROTOCOL+"//rtcdn.cincopa.com/jsonv2.aspx");cincopa.traceit("Cincopa Library loaded "+cincopa._ROOT_LOADER_STATIC,"");cincopa.set_debug=function(b){try{console.log(cincopa.inBetween(document.cookie,"cpdebug=",";"))}catch(c){}if(typeof b=="undefined"){return}window.cincopa._debug=b;var e=new Date();e.setDate(e.getDate()+70);document.cookie="cpdebug="+b+"; expires="+e.toGMTString()+"; path=/"};cincopa._wp_filesadded=cincopa._wp_filesadded||"";cincopa.loadJSFile=function(b){if(b.toLowerCase().indexOf("//")==-1){b=_cincopa_url+b}cincopa.trace("loadJSFile "+b);if(true){var c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",b);document.getElementsByTagName("head")[0].appendChild(c);cincopa._wp_filesadded+="["+b+"]"}};cincopa.loadCSSFile=function(b){if(b.toLowerCase().indexOf("//")==-1){b=_cincopa_url+b}cincopa.trace("loadCSSFile "+b);if(cincopa._wp_filesadded.indexOf("["+b+"]")==-1){var c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",b);document.getElementsByTagName("head")[0].appendChild(c);cincopa._wp_filesadded+="["+b+"]"}};cincopa.logError=function(e,b,d){try{if(!d){d="http://"+b+"/"+cincopa.location.replace("?","@").replace("#","@")}cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/oa.aspx?uid=rtlogerror&fid="+e+"&setref="+encodeURIComponent(d));cincopa.traceit("CINCOPA LOG ERROR : "+e+" data: "+b,"")}catch(c){}};cincopa.logException=function(b){try{cincopa.trace(b);cincopa.logError("exception-"+name,b.toString()+" "+b.stack.split("\n")[1].trim())}catch(b){}};cincopa.logFeature=function(e,c){try{var d=cincopa.location;if(c){d="http://"+c+"/"+d}cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/oa.aspx?uid=rtfeatures&fid="+e+"&setref="+encodeURIComponent(d))}catch(b){}};cincopa.parseqs=function(c){if(c==""){return{}}var d={};for(var e=0;e<c.length;++e){var f=c[e].split("=",2);if(f.length==1){d[f[0]]=""}else{d[f[0]]=decodeURIComponent(f[1].replace(/\+/g," "))}}return d};try{cincopa.qs=cincopa.qa||cincopa.parseqs(window.location.search.substr(1).split("&"));cincopa.hash=cincopa.hash||cincopa.parseqs(window.location.hash.substr(1).split("&"))}catch(ex){}var zeSkins=zeSkins||[];var zeGalleryArray=zeGalleryArray||[];var _cp_go_hooks=new Object();var _cp_last_gallery=_cp_last_gallery||0;var _wp_widget_js_array=_wp_widget_js_array||[];var _cp_preloaded_files=_cp_preloaded_files||new Object();if(location.search.indexOf("cpenablefirebug2")>-1){var firebug=document.createElement("script");firebug.setAttribute("src","https://getfirebug.com/firebug-lite-debug.js");document.body.appendChild(firebug);(function(){if(window.firebug.version){firebug.init()}else{setTimeout(arguments.callee)}})();void (firebug)}else{if(location.search.indexOf("cpenablefirebug")>-1){var firebug=document.createElement("script");firebug.setAttribute("src","https://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js");document.body.appendChild(firebug);(function(){if(window.firebug.version){firebug.init()}else{setTimeout(arguments.callee)}})();void (firebug)}}cincopa.cprtv2=function(c){var b=c.loaderParams._fid;var f=null;var h=cincopa._ROOT_PROTOCOL+"//rtcdn.cincopa.com/meta_json.aspx";if(b.indexOf("!")>-1){var g=b.split("!");f=g[0];var e=g[1];h+="?rid="+e+"&template="+f}else{if(b.indexOf("@")>-1){var g=b.split("@");f=g[0];var b=g[1];h+="?fid="+b+"&template="+f}else{h+="?fid="+b+"&template="+b}}var d=function(l){var k=cincopa.json_parse(l);c.acc=k.acc;if(k.args.old_skin=="true"){cincopa.traceit("Cincopa : Old skin detected");var m="";if(cincopa.location_blocked){m="&setref="+encodeURIComponent(cincopa.location)}var n=cincopa._ROOT_LOADER_STATIC+"widgetasync.aspx?id="+c.loaderParams._id+m;n+="&fid="+c.loaderParams._fid;n+=cp_add_override();cincopa.loadJSFile(n);return}c.json_url=cincopa._JSONV2;c.args=k.args;if(Object.keys&&Object.keys(c.args).length>0&&k.preload){c.args.id=c.loaderParams._id;c.args.preloader_js='"'+k.preload.js+'"';c.args.preloader_css='"'+k.preload.css+'"'}if(Object.keys(k.media).length>0){c.loaderParams._feedjson=k.media}if(cincopa.qs.cpdisablepreload||!k.preload||!k.preload.js){c.onArgs()}else{c.loadjscssfile(k.preload.js,"js","head",function(){c.onArgs()});c.loadjscssfile(k.preload.css,"css","head",function(){})}};if(c.loaderParams._meta){d(c.loaderParams._meta)}else{Ajax(h,{http_method:"GET"},d)}};cincopa.boot_all=function(){for(var b=0;b<_cpmp.length;b++){cincopa.boot_gallery(_cpmp[b])}};cincopa.boot_gallery=function(g){if(cincopa.qs.cpdebug=="stopall"){alert("stopall");return}if(!getElement(g._object)){cincopa.traceit("CINCOPA ERROR : MISSING DIV (try to embed again to fix) - div: "+g._object+" gallery: "+g._fid,g);cincopa.logError("trackmissingdiv1",g._fid);return}g._id="_cp_"+_cp_last_gallery++;var b=new GalleryObject(g);zeGalleryArray[g._id]=b;if(g._iframeParentObject){b.iframeParentObject=g._iframeParentObject}if(g._args){cincopa.trace("loading args directly into go object");b.onArgs(g._args);return}var d="";if(cincopa.location_blocked){d="&setref="+encodeURIComponent(cincopa.location)}var f=cincopa._ROOT_LOADER_STATIC+"widgetasync.aspx?id="+g._id+d;if(g._fid!=null){if(!g._fid.startsWith("rrid")&&!(g._fid.indexOf("!liveid")>-1)){g._fid=unescape(g._fid).replace("[cincopa","").replace(/[\s\+\[\]]/g,"")}if(g._fid.startsWith("rrid")){g._fid=g._fid.replace(/!/g,":");var e=g._fid.split(":");var c=g._fid.substring(5,g._fid.length-2-e[e.length-2].length-e[e.length-1].length);f+="&rrid="+c+"&uid="+e[e.length-2]+"&template="+e[e.length-1]}else{if(g._fid.indexOf("!liveid")>-1){var e=g._fid.split("!");f+="&liveid="+e[1].split(/:|-/)[1]+"&template="+e[0]}else{if(!cincopa.qs.cprtv1){cincopa.cprtv2(b);return}else{f+="&fid="+g._fid}}}}else{f+="&rrid="+g._rrid+"&uid="+g._uid+"&template="+g._template}f+=cp_add_override();cincopa.loadJSFile(f)};var _cpmp=_cpmp||[];cincopa.boot_all();_cpmp=[];function cp_load_widget(b,d,c){var e=[];e._object=d;e._fid=b;cincopa.boot_gallery(e)}function getElement(b){return(document.getElementById)?document.getElementById(b):document.all[b]}function cp_add_override(){var c=function(d){if(cincopa.qs&&cincopa.qs[d]){b+="&"+d+"="+cincopa.qs[d];cincopa.trace("override "+d+"="+cincopa.qs[d])}};var b="";c("cptemplate");c("cpskin");c("cpdisablepreload");c("cpenableinline");return b}function wp_widget_show(b,e){try{b.id=zeGalleryArray[b.id].loaderParams._object}catch(c){}var d=new GalleryObject(new Object());d.loadjscssfile(cincopa._ROOT_LOADER_STATIC+"libasync_old.js?aas","js","body",function(){wp_widget_show_old(b,e)})}cincopa.testtrack=function(uid){if(cincopa.location.indexOf("cincopa.com")>-1){return}var lf=eval(atob("WyJicmlnaHRjb3ZlIiwieW91dHViZSIsInZpbWVvIiwid2lzdGlhIiwidnphYXIiLCJzcHJvdXR2aWRlbyIsImRyb3BzaG90cyIsInZpZGRsZXIiLCJpcGxheWVyaGQiLCJrYWx0dXJhIiwidmlkYmVvIiwiandwbGF5ZXIiLCJkYWlseW1vdGlvbiIsIm9veWFsYSIsInZpZHlhcmQiLCJsaXZlcGVyc29uIiwiaW50ZXJjb20iLCJtYXJrZXRvIiwiaHVic3BvdCIsInBhcmRvdCIsImVsb3F1ZSIsIm1vb2RsZSIsImFjdC1vbiIsImNsaWNrdGFsZSIsImhvdGphciIsImx1Y2t5b3JhbmdlIiwic2hvcGlmeSIsImJpZ2NvbW1lcmNlIiwicHJlc3Rhc2hvcCIsIm1hZ2VudG8iLCJkcnVwYWwiLCJtaWNyb3NvZnQiLCJzaGFyZXBvaW50Iiwic2FsZXNmb3JjZSIsIm1peHBhbmVsIiwia2lzc21ldHJpY3MiLCJ3b29jb21tZXJjZSIsIndpeCIsImp3cGxhdGZvcm0iXQ=="));var found=new Object();var lists=[];lists.push(document.getElementsByTagName("script"));lists.push(document.getElementsByTagName("iframe"));for(var lx in lists){for(var s=lists[lx].length-1;s>=0;s--){var src=lists[lx][s].src.toLowerCase();for(var lfi in lf){if(src.indexOf(lf[lfi])>-1){found[lf[lfi]]=null}}}}if(cincopa.location.indexOf(".ebay")>-1){found.ebay=null}for(var f in found){cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/oa.aspx?uid=track&fid="+f+"&setref="+encodeURIComponent("http://"+uid+"/"+cincopa.location))}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){for(var b=0;b<this.length;b++){if(this[b]===c){return b}}return -1}}function trace(c,b){cincopa.trace(c,b)}function getElement(b){return(document.getElementById)?document.getElementById(b):document.all[b]}if(typeof _zel!="undefined"){for(var i=0;i<_zel.length;i++){var go=new GalleryObject(_zel[i]);_zel[i]["_id"]="_cp_"+_cp_last_gallery++;zeGalleryArray[_zel[i]["_id"]]=go;if(_zel[i]["_iframeParentObject"]){go.iframeParentObject=_zel[i]["_iframeParentObject"]}if(_zel[i]["_args"]){cincopa.trace("loading args directly into go object");go.onArgs(_zel[i]["_args"])}else{go.initialize()}}_zel=[]}function GalleryObject(params){var self=this;this.loaderParams=params;this.saveJSONPars=null;this.skinPath=null;this.skin=null;this.args=null;this.acc=null;this.galleryEditPanel=null;this.iframeParentObject=null;this.iframeParentId=null;this.url_params={};this.uid=null;this.json_url=cincopa._JSON;try{this.loaderParams._id=this.loaderParams._id||this.loaderParams._object}catch(ex){}try{var tmpsplit=location.search.substring(1).split("&");for(var x=0;x<tmpsplit.length;x++){var tmp=tmpsplit[x].split("=");this.url_params[tmp[0]]=tmp[1]}}catch(ex){}function _trace(msg){return cincopa.trace("GO [ "+self.loaderParams._object+" ] : "+msg)}this.arg_misc_group={misc:{name:"Misc",desc:"Add-on settings for the gallery, availalble only for pro users."}};this.arg_misc={allow_download:{group:"misc",name:"Allow Download",type:"list",values:{no:"No",original:"Original files",resized:"Web version"},desc:"Allow user to download and save all files.<br>* Resized zip contains photos resized to 600x450, videos in mp4 format and music in original sampling."},domain_lock:{group:"misc",type:"text",name:"Domain Lock",desc:"Allow this gallery to appear only in the domains on this list. This will prevent others from grabbing your gallery to their site. <br>Type a list of domains separated by comma or leave empty to allow all domains.<br>No need for <i>http://</i><br>For example: <i>mydomain.com,blogspot.com</i>"},domain_lock_msg:{group:"misc",type:"text",name:"Domain Lock Message",desc:"Message to be displayed when the gallery is locked, leave empty to keep the default message."},password:{group:"misc",type:"text",name:"Password",desc:"Protected your gallery with a password. Give it to your users and only they will be able to access the content."},iframe:{group:"misc",type:"bool",name:"iframe",desc:"Enable this option if the gallery is not working properly inside a page and the gallery will be placed in a HTML iframe."},ga_event:{group:"misc",type:"list",name:"Track Events With GA",values:{off:"Off (default)",on:"On"},desc:"When On the gallery will post events directly to your Google Analytics account where you can get detailed infromation about user engagement."},allow_search:{group:"misc",type:"list",name:"Search box",values:{no:"No (default)",yes:"Yes"},desc:"Add a search box above the gallery to allow user to search the gallery."},allow_tabs:{group:"misc",type:"bool",name:"Tabs",desc:"Group items by tag."},allow_tabs_layout:{group:"misc",type:"list",name:"Tabs Layout",values:{"theme-1":"Theme 1","theme-2":"Theme 2","theme-3":"Theme 3","theme-4":"Theme 4","theme-5":"Theme 5","theme-6":"Theme 6","theme-7":"Theme 7","theme-8":"Theme 8"},desc:"Tabs Layout",enableExp:"param.allow_tabs == 'true'"},allow_tabs_tags:{group:"misc",type:"tag",name:"Add tags",desc:"Add tags, enter tag or tags to group items, use 'no-tag' for items without any tag. Use 'All' to add a special tab with all items",enableExp:"param.allow_tabs == 'true'"},allow_fixpos:{group:"misc",type:"list",name:"Fix Position",values:{no:"No (default)",cp_fixedLeftTop:"Left top",cp_fixedLeftBottom:"Left bottom",cp_fixedRightTop:"Right top",cp_fixedRightBottom:"Right bottom"},desc:"Fix the gallery to the corner of the page.",enableExp:"param.allow_lightbox == 'no'"},allow_margins:{group:"misc",type:"num",name:"Gallery margins",desc:"Define the margin size of gallery from the screen.",enableExp:"param.allow_lightbox == 'no'"},allow_lightbox:{group:"misc",type:"list",name:"Open gallery in lightbox",values:{no:"No (default)",thumbnail:"thumbnail",video_thumbnail:"video thumbnail",text:"text"},desc:"Open gallery in lightbox"},allow_lightbox_text:{group:"misc",type:"text",name:"Lightbox button text",desc:"Lightbox button text",enableExp:"param.allow_lightbox == 'text'"},allow_lightbox_size:{group:"misc",type:"list",name:"Lightbox thumbnail size",values:{small:"small 224:140",medium:"medium 440:275"},desc:"Lightbox thumbnail size",enableExp:"param.allow_lightbox == 'thumbnail' || param.allow_lightbox == 'video_thumbnail'"}};this.arg_misc_defaults={cooliris:"no",allow_download:"no",domain_lock:"",password:"",ga_event:"off",allow_search:"no",allow_fixpos:"no",allow_tabs:false,allow_tabs_layout:"theme-1",allow_tabs_tags:"",allow_margins:0,allow_lightbox:"no",allow_lightbox_text:"Open gallery",allow_lightbox_size:"small"};this.arg_template_group={template:{name:"Template",desc:""}};this.arg_template_map={tmpl_unique_name:{group:"template",type:"text",name:"Unique Name",desc:""},tmpl_description:{group:"template",type:"text",name:"Description",desc:""},tmpl_author:{group:"template",type:"text",name:"Author",desc:""},tmpl_visible:{group:"template",type:"list",values:{publicc:"Public",privatee:"Private"},name:"Visible",desc:""},tmpl_license:{group:"template",type:"num",name:"License",desc:""},tmpl_type:{group:"template",type:"text",name:"Type",desc:""},tmpl_support_photo:{group:"template",type:"bool",name:"Support Photo",desc:""},tmpl_support_video:{group:"template",type:"bool",name:"Support Video",desc:""},tmpl_support_audio:{group:"template",type:"bool",name:"Support Audio",desc:""},tmpl_poster_url:{group:"template",type:"text",name:"Poster URL",desc:""},tmpl_demo_fid:{group:"template",type:"text",name:"Demo Fid",desc:""},tmpl_demo_html:{group:"template",type:"html",name:"Demo HTML",desc:""}};this.arg_overlay_group={overlay:{name:"Overlay",desc:"Overlay settings for the gallery."}};this.arg_overlay={overlay_type:{group:"overlay",type:"list",name:"Overlay type",values:{off:"Off",button:"CTA button",watermark:"Watermark",poster_logo:"Overlay on poster",custom:"Custom"},desc:"Overlay type"},overlay_button_title:{group:"overlay",type:"text",name:"Overlay title",desc:"Overlay title",removeExp:"param.overlay_type != 'button'"},overlay_button_text:{group:"overlay",type:"text",name:"Button text",desc:"Text of button",removeExp:"param.overlay_type != 'button'"},overlay_button_color:{group:"overlay",type:"color",name:"Button color",desc:"Color of the button",removeExp:"param.overlay_type != 'button'"},overlay_button_text_color:{group:"overlay",type:"color",name:"Text color",desc:"Color of the text",removeExp:"param.overlay_type != 'button'"},overlay_watermark_url:{group:"overlay",type:"text",name:"Watermark image URL",desc:"Location of an external jpg, png or gif image to show in a corner of the display.",removeExp:"param.overlay_type != 'watermark'"},overlay_watermark_position:{group:"overlay",type:"list",name:"Watermark position",values:{top_left:"top left",top_right:"top right",bottom_left:"bottom left",bottom_right:"bottom right",},desc:"Watermark Position",removeExp:"param.overlay_type != 'watermark'"},overlay_link:{group:"overlay",type:"text",name:"Click url",desc:"Open URL on click.",removeExp:"param.overlay_type != 'button' && param.overlay_type != 'watermark'"},overlay_target:{group:"overlay",type:"bool",name:"Open url in new tab",desc:"Open link in current tab or new tab.",removeExp:"param.overlay_type != 'button' && param.overlay_type != 'watermark'"},overlay_html:{group:"overlay",type:"textarea",name:"Overlay html",desc:"Custom html of overlay",removeExp:"param.overlay_type != 'custom'"},overlay_poster_type:{group:"overlay",type:"list",name:"Overlay type",values:{overlay:"Colored Overlay",image:"Image"},desc:"Choose a transparent colored overlay with customization color or a global preview video poster image for all assets in this gallery",removeExp:"param.overlay_type != 'poster_logo'"},overlay_poster_overlay_bg:{group:"overlay",type:"color",name:"Overlay color",desc:"Match the overlay color to your brand or website color theme",removeExp:"param.overlay_type != 'poster_logo' || param.overlay_poster_type != 'overlay'"},overlay_poster_logo_url:{group:"overlay",type:"text",name:"Image URL",desc:"Location of an external jpg, png or gif image to show on poster",removeExp:"param.overlay_type != 'poster_logo' || param.overlay_poster_type != 'image'"},overlay_time:{group:"overlay",type:"list",name:"Overlay time",values:{onload:"on load",at_sec:"after X seconds",onhover:" on mouse hover",onclick:"on click"},desc:"Overlay show time",removeExp:"param.overlay_type == 'off' || param.overlay_type == 'poster_logo'"},overlay_sec:{group:"overlay",type:"text",name:"Show delay",desc:"Delay in seconds for overlay appearance",removeExp:"param.overlay_time != 'at_sec'"}};this.arg_overlay_defaults={overlay_type:"off",overlay_button_color:"0066CC",overlay_button_text_color:"ffffff",overlay_target:true,overlay_link:"",overlay_button_title:"Title",overlay_button_text:"Button text",overlay_watermark_url:"",overlay_watermark_position:"top_left",overlay_poster_type:"overlay",overlay_poster_overlay_bg:"000000",overlay_html:"",overlay_time:"onload"};this.initialize=function(){this.skin=null;cincopa.trace("GalleryObject - "+this.loaderParams._object+" - "+this.loaderParams._gid);this.loadjscssfile(cincopa._AJAX+"args.aspx?id="+this.loaderParams._object+"&fid="+this.loaderParams._gid,"js")};this.getCSSCode=function(name){var style=this.args["css_"+name];if(style&&style.length){style=style.replace(/~skin_path~/g,this.skinPath);style=style.replace(/~gallery_div~/g,this.loaderParams._object);style=style.replace(/~assets_path~/g,cincopa._HOST+"/assets/");var i=style.indexOf("~arg_");while(i>-1){var t=style.indexOf("~",i+1);if(t==-1){break}var markup=style.substring(i,t);var argname=markup.substr(5,markup.length-1);var argvalue="";try{argvalue=this.args[argname]}catch(ex){}style=style.substring(0,i)+argvalue+style.substring(t+1);i=style.indexOf("~arg_")}style="<style type='text/css' id='cp_custom_css_"+this.loaderParams._object+"'>"+style+"</style>";if(navigator.appVersion.match(/MSIE (8|7)/)){style="<br style='display:none;' />"+style}}else{style=""}return style};this.drawErrorBox=function(msg){var htm="<div style=width:600px;height:100px;color:red;font-size:14px;text-align:center;background-color:#f5f5f5;><br>"+msg+"</div>";this.args.widget_w=600;this.args.widget_h=200;this.setGalleryHTML(htm)};this.onArgs=function(args){_trace("onArgs");if(this.acc){if(this.acc.user){this.uid=this.acc.user.uid;if(this.acc.user.status=="suspended"){cincopa.logError("user_suspended",this.uid);this.drawErrorBox("Gallery not available<br>Please follow <a href='https://www.cincopa.com/pricing'>this link</a> or contact us at support@cincopa.com");return}else{if(this.acc.user.status=="abuser"){cincopa.logError("user_abuser",this.uid);this.drawErrorBox("Cincopa trial has expired<br>Please <a href='https://www.cincopa.com/pricing'>upgrade</a> to re-enable this gallery");return}else{if(this.acc.user.status=="domain_locked"){cincopa.logError("user_domain_locked",this.uid);this.drawErrorBox(this.acc.user.status_msg);return}else{if(this.acc.user.status=="outoftraffic"){cincopa.logError("user_outoftraffic",this.uid);this.drawErrorBox("Gallery not available<br>Please follow <a href='https://www.cincopa.com/pricing'>this link</a> or contact us at support@cincopa.com");return}else{if(this.acc.user.status=="outofstorage"&&this.acc.user.plan_name=="free"){cincopa.logError("user_free_outoftraffic",this.uid);this.drawErrorBox("Gallery not available - out of quota <br>Please follow <a href='https://www.cincopa.com/pricing'>this link</a> or contact us at support@cincopa.com");return}else{if(this.acc.user.status=="outofstorage"){}}}}}}if(this.acc.user.integration&&this.acc.user.integration.hubspot&&this.acc.user.integration.hubspot=="active"){cincopa.registerEvent("cincopa.cp_hubspot_integration","video.*");cincopa.registerEvent("cincopa.cp_hubspot_integration","emailgate.*");cincopa.logFeature("hubspot-active",this.uid)}if(this.acc.user.settings&&this.acc.user.settings["analytics.filter_ip"]!=""){cincopa.analytics_filter_ip=this.acc.user.settings["analytics.filter_ip"]}if(this.acc.user.settings&&this.acc.user.settings["analytics.anonymize_ip"]=="on"){cincopa.analytics_anonymize_ip=this.acc.user.settings["analytics.anonymize_ip"]}}else{cincopa.logError("gallery_not_ready","unknow_user");this.drawErrorBox("Gallery not ready");return}}if(args!=null){this.args=args}if(!this.uid&&this.args&&this.args.cmapath){this.uid=this.args.cmapath.split("%")[0]}if(Object.keys&&Object.keys(this.args).length===0){cincopa.logError("gallery_not_found","unknow_user");this.drawErrorBox("Gallery not found");return}for(var n in cincopa.hash){if(n.startsWith("cpo")){this.args[n.substring(3)]=cincopa.hash[n]}}this.onSkinEvent("runtime.on-args");this.onSkinEvent("runtime.internal-on-args");if(!this.args.haltLoadSkin){this.startLoadSkin()}};this.startLoadSkin=function(){var isiframe=this.args.iframe;if((isiframe===undefined||isiframe==="")&&this.args.template_args!=null){isiframe=this.args.template_args.iframe}if(isiframe===undefined){isiframe=false}else{isiframe=isiframe.toString().toLowerCase()=="true"}if(isiframe&&this.iframeParentObject==null){this.loadIFrameSkin()}else{this.loadSkin()}};this.loadArgs=function(){if(location.href.indexOf("zemaketemplate=")>-1){this.skin.arg_groups=this.merge_json(this.skin.arg_groups,this.arg_template_group);this.skin.arg_map=this.merge_json(this.skin.arg_map,this.arg_template_map)}var args_map=this.skin.arg_map;var args_defaults=this.skin.arg_defaults;var temp_args={};for(var n in args_defaults){temp_args[n]=args_defaults[n]}for(var n in this.args.template_args){temp_args[n]=this.args.template_args[n]}for(var n in this.arg_misc_defaults){temp_args[n]=this.arg_misc_defaults[n]}for(var n in this.arg_overlay_defaults){temp_args[n]=this.arg_overlay_defaults[n]}var user_permit=this.args.permit;if(this.acc){user_permit=this.acc.user.permit}for(var n in this.args){var par_permit=0;try{if(args_map[n]){par_permit=eval(args_map[n].permit)}}catch(ex){}if(typeof par_permit=="undefined"){par_permit=0}if(par_permit<=user_permit){temp_args[n]=this.args[n]}}var normalize=function(obj){for(var n in obj){if(args_map[n]&&args_map[n].type=="bool"){obj[n]=obj[n]==="true"||obj[n]===true}else{if(obj[n]&&obj[n].type=="num"){obj[n]=parseInt(obj[n])}}}};normalize(temp_args);normalize(temp_args.template_args);this.args=temp_args};this.loadIFrameSkin=function(){var w=600,h=450;if(this.args.widget_w){w=this.args.widget_w}if(this.args.widget_h){h=this.args.widget_h}var ifrm='<iframe id="zeiframe_'+this.loaderParams._object+'" allowfullscreen scrolling=no frameborder=0 vspace=0 hspace=0 marginwidth=0 marginheight=0 width='+w+"px height="+h+"px></iframe>";this.setGalleryHTML(ifrm,true);cincopa.trace("Creating iframe zeiframe_"+this.loaderParams._object);var zeiframe=document.getElementById("zeiframe_"+this.loaderParams._object);zeiframe.width="100%";var doc=zeiframe.contentDocument;if(doc==undefined||doc==null){doc=zeiframe.contentWindow.document}var htm="";var writeto=function(what){htm+=what;htm+="\n"};writeto('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\n<html>\n<head>');writeto('<script type="text/javascript" src="'+cincopa._ROOT_LOADER+'libasync.js"> </script>');writeto(unescape("%3Cscript type='text/javascript'%3E"));writeto("var _gallery_args = {");for(var n in this.args){if(n!="template_args"){writeto(n+":'"+this.args[n].toString().replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/'/g,"\\'")+"',")}}writeto("template_args : {");for(var n in this.args.template_args){if(n!="gmdss"){writeto(n+":'"+this.args.template_args[n].toString().replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/'/g,"\\'")+"',")}}writeto("gmdss:'y' }};");writeto(unescape("%3C/script%3E"));writeto("</head><body marginheight=0 marginwidth=0 style='margin-top: 0px;'>");writeto("<div id='inneriframe'></div>");writeto(unescape("%3Cscript defer type='text/javascript'%3E"));writeto("var zeo = [];");writeto("zeo['_object'] = 'inneriframe';");writeto("zeo['_id'] = 'inneriframe';");if(this.loaderParams._feedjson!=null){writeto("zeo['_feedjson'] = "+cincopa.json_stringify(this.loaderParams._feedjson)+";")}writeto("zeo['_fid'] = '"+this.loaderParams._fid+"';");writeto("zeo['_args'] = _gallery_args;");writeto("zeo['_iframeParentObject'] = '"+this.loaderParams._object+"';");writeto("zeo['_iframeParentId'] = '"+this.loaderParams._id+"';");writeto("var go = new GalleryObject(zeo);");writeto("zeGalleryArray['inneriframe'] = go");writeto("go.iframeParentObject = '"+this.loaderParams._object+"';");writeto("go.iframeParentId = '"+this.loaderParams._id+"';");writeto("go.json_url = '"+this.json_url+"';");if(this.acc){writeto("go.acc = "+cincopa.json_stringify(this.acc)+";")}if(this.args.preloader_js&&!cincopa.qs.cpdisablepreload){writeto("go.args = _gallery_args;");writeto("go.loadjscssfile("+this.args.preloader_js+", 'js', 'head', function() {(zeGalleryArray['inneriframe']).onArgs(); });");writeto("go.loadjscssfile("+this.args.preloader_css+", 'css', 'head', function() {}); ")}else{writeto("go.onArgs(zeo['_args']);")}writeto(unescape("%3C/script%3E"));writeto("</body>\n</html>");cincopa.trace(htm);doc.open();doc.write(htm);doc.close()};this.getParentIframeObject=function(){if(!this.iframeParentId){return null}return parent.document.getElementById("zeiframe_"+parent.zeGalleryArray[this.iframeParentId].loaderParams._object)};this.loadSkin=function(){if(this.args.exception){if(this.args.exception=="galleryempty"){var msg="Gallery Is Empty";if(this.args.logged_user=="owner"){msg+="<br><br>Click 'Edit' at the top left of this box<br>and then click 'Add Media File' at the menu on the right."}var htm="<div style=width:600px;height:200px;color:red;font-size:14px;font-family: 'Droid Arabic Kufi',Century Gothic;text-align:center;background-color:#f5f5f5;><br><br><br>"+msg+"</div>";this.args.widget_w=600;this.args.widget_h=200;this.setGalleryHTML(htm);if(this.onSkinInit){this.onSkinInit()}return}}if(typeof this.url_params.zeskinpath!=="undefined"){this.skinPath=this.url_params.zeskinpath}else{if(this.args.skin_code.charAt(0)=="/"){this.skinPath="//rtcdn.cincopa.com/fpskins"+this.args.skin_code+"/"}else{this.skinPath=cincopa._HOST+this.args.skin_code+"/"}}if(this.loaderParams._dev_path){this.skinPath=this.loaderParams._dev_path}if(typeof zeSkins[this.getSkinName(this.args.skin_code)]=="undefined"){var skinfile=this.skinPath+"skin.js";if(location.href.indexOf("zetestskin=")>-1){skinfile=this.skinPath+"skin_test.js"}this.loadjscssfile(skinfile,"js","head",function(){self.initSkin()})}else{this.initSkin()}};this.getSkinName=function(skin_code){if(this.args.skin_code.charAt(0)=="/"){return this.args.skin_code.split("/")[1]}return skin_code};this.initSkin=function(){_trace("initializing skin");this.skin=new zeSkins[this.getSkinName(this.args.skin_code)];this.skin.init(this);if(this.onSkinInit){this.onSkinInit()}if(this.iframeParentId!=null&&parent.zeGalleryArray[this.iframeParentId].onSkinInit){parent.zeGalleryArray[this.iframeParentId].onSkinInit()}};this.getMediaJSON=function(par){if(par!=null){this.saveJSONPars=par}if(this.loaderParams._feedjson){this.MediaJSON=this.loaderParams._feedjson;this.zeOnMediaJSON()}else{var jsonlink=this.json_url;if(this.loaderParams._feedurl){jsonlink=this.loaderParams._feedurl}jsonlink+="?callback=zeOnMediaJSON";jsonlink+="&wid="+this.loaderParams._id;if(!this.loaderParams._fid||this.loaderParams._fid.startsWith("rrid:")){jsonlink+="&fid="+this.args.fid;if(this.acc){cincopa.logError("cprtv2","_fid_null")}}else{if(this.args.liveid){var tmp=this.loaderParams._fid.split("!");jsonlink+="&fid="+tmp[0]+"!&liveid="+tmp[1].split(/:|-/)[1]}else{jsonlink+="&fid="+this.loaderParams._fid}}jsonlink+="&thumb="+this.saveJSONPars.thumb;jsonlink+="&content="+this.saveJSONPars.content;if(this.saveJSONPars.details){jsonlink+="&details="+this.saveJSONPars.details}if(this.saveJSONPars.password){jsonlink+="&password="+this.saveJSONPars.password}else{var pass=cincopa.inBetween(document.cookie,"pass"+this.args.fid+"=",";");if(pass){jsonlink+="&password="+pass}}if(this.args._access_key){jsonlink+="&openpassword="+this.args._access_key+":"+encodeURIComponent(this.args.password)}if(this.loaderParams._feedparams){jsonlink+=this.loaderParams._feedparams}if(this.args.extra_assets){jsonlink+="&extra="+this.args.extra_assets}if(this.loaderParams._rid){jsonlink+="&rid="+this.loaderParams._rid}if(cincopa.qs&&cincopa.qs.cpversions){jsonlink+="&versions="+cincopa.qs.cpversions}if(cincopa.qs&&cincopa.qs.cpm3u8url){jsonlink+="&cpm3u8url="+cincopa.qs.cpm3u8url}this.loadjscssfile(jsonlink,"js")}};this.zeOnMediaJSON=function(){_trace("zeOnMediaJSON");if(this.MediaJSON.errorcode=="bad_password"){this.loadjscssfile(cincopa._ROOT_LOADER_STATIC+"md5.js","js","body");this.promtPassword(this.skin.go.loaderParams._object);return}else{if(this.MediaJSON.errorcode){this.setGalleryHTML("<b>"+this.MediaJSON.errormessage+"</b>");_trace("json error - "+this.MediaJSON.errormessage);return}else{if(this.args.allow_lightbox=="thumbnail"||this.args.allow_lightbox=="video_thumbnail"||this.args.allow_lightbox=="text"){this.showLightbox(this.skin.go.loaderParams._object);return}}}this.onSkinEvent("runtime.on-media-json");if(!this.args.haltLoadMedia){this.startLoadMedia()}};this.startLoadMedia=function(){this.skin.onMediaJSON(this.MediaJSON)};var promt_shown=false;this.promtPassword=function(containerID){var container=document.getElementById(containerID);var passwordDivContainer=document.createElement("div");passwordDivContainer.className="ze_password_promt_container";var passwordDivContainerHead=document.createElement("h1");passwordDivContainerHead.innerHTML="Please enter a password";var errorSpan=document.createElement("span");errorSpan.innerHTML="Wrong password. Please try again";errorSpan.className="errorText";var passChildCont=document.createElement("div");passChildCont.className="ze_password_field";var passInput=document.createElement("input");passInput.type="text";passInput.name="ze_password";passInput.placeholder="Password";passInput.className="ze_password_input";var passSubmitCont=document.createElement("div");passSubmitCont.className="ze_submit_field";var passSubmitBtn=document.createElement("a");passSubmitBtn.href="javascript:void(0)";passSubmitBtn.className="ze_password_submit_btn";passSubmitBtn.innerHTML="Submit";passChildCont.appendChild(passInput);passSubmitCont.appendChild(passSubmitBtn);passwordDivContainer.appendChild(passwordDivContainerHead);if(promt_shown==true){passwordDivContainer.appendChild(errorSpan)}passwordDivContainer.appendChild(passChildCont);passwordDivContainer.appendChild(passSubmitCont);container.innerHTML="";container.appendChild(passwordDivContainer);promt_shown=true;passInput.onkeypress=function(e){if(e.keyCode==13){onPasswordSubmit();return false}};passSubmitBtn.onclick=function(){onPasswordSubmit()};function onPasswordSubmit(){var value=passInput.value;var f=new Date();f.setDate(f.getDate()+7);document.cookie="pass"+self.args.fid+"="+hex_md5(value)+"; expires="+f.toGMTString();self.saveJSONPars.password=hex_md5(value);self.getMediaJSON()}};this.showLightbox=function(_object){var obj=getElement(_object);var that=this;var items=this.MediaJSON.items;if(items.length){function closePopup(parent,child){try{that.skin.player.$media[0].pause()}catch(ex){}fixedContainer.style.display="none";fixedOverlay.style.display="none";closeBtn.style.display="none";doc.body.className=doc.body.className.replace(new RegExp("(\\s|^)cp_overflow_hidden(\\s|$)")," ")}var doc=that.detectIframeDocument();obj.style.overflow="visible";obj.innerHTML="";var thumb=this.MediaJSON.items[0].thumbnail_url;var img=new Image();img.src=thumb;img.onload=function(){if(this.width<this.height){button.className=button.className+" portrait"}};var fixedContainer=document.createElement("div");fixedContainer.className="cp_lightbox_wrap";var newObj=document.createElement("div");newObj.className="cp_lightbox_wrap_obj";newObj.id="cp_lightbox_wrap_obj_"+_object;fixedContainer.appendChild(newObj);var closeBtn=document.createElement("a");closeBtn.className="cp_lightbox_close_btn";closeBtn.onclick=function(){closePopup()};var fixedOverlay=document.createElement("div");fixedOverlay.className="cp_lightbox_overlay";fixedOverlay.onclick=function(){closePopup()};var button=document.createElement("div");if(that.args.allow_lightbox=="thumbnail"||that.args.allow_lightbox=="video_thumbnail"){button.className="cp_lightbox_btn";if(that.args.allow_lightbox=="video_thumbnail"){button.className+=" cp_lightbox_video_btn"}var button_inner=document.createElement("div");var button_img=document.createElement("img");button_img.src=thumb;button.appendChild(button_inner);button_inner.appendChild(button_img);if(that.args.allow_lightbox_size=="small"||that.args.allow_lightbox_size=="medium"){button.className+=" cp_lightbox_btn_"+that.args.allow_lightbox_size}}else{if(that.args.allow_lightbox=="text"){button.className="cp_lightbox_btn_btn";button.innerHTML="<p>"+that.args.allow_lightbox_text+"</p>"}}button.onclick=function(){fixedContainer.style.display="block";fixedOverlay.style.display="block";closeBtn.style.display="block";that.args.allow_lightbox=false;that.loaderParams._object="cp_lightbox_wrap_obj_"+_object;that.getMediaJSON();doc.body.className+=" cp_overflow_hidden";try{window.dispatchEvent(new Event("resize"))}catch(ex){}};obj.appendChild(button);doc.addEventListener("keyup",function(e){if(fixedOverlay.style.display!="none"&&e.which==27){closePopup()}});obj.appendChild(fixedContainer);obj.appendChild(fixedOverlay);obj.appendChild(closeBtn)}};this.getMediaRSSURL=function(par){var link=cincopa._AJAX+"rss200.aspx?fid="+this.args.fid;link+="&thumb="+par.thumb;link+="&content="+par.content;return link};this.buildTabs=function(gallery){var that=gallery;var tabsStr=this.args.allow_tabs_tags;if(this.args.allow_tabs_tags){var tabsArr=tabsStr.split(",").map(function(el){var trimmed=el.trim();return{name:trimmed.indexOf("(")>-1&&trimmed.indexOf(")")>-1?trimmed.substring(0,trimmed.indexOf("(")).trim():trimmed,title:trimmed.indexOf("(")>-1&&trimmed.indexOf(")")>-1?trimmed.substring(trimmed.indexOf("(")+1,trimmed.indexOf(")")).trim():trimmed}})}else{var tabsArr=[];var items=that.MediaJSON.items;for(var i=0;i<that.MediaJSON.items.length;i++){var current=that.MediaJSON.items[i];var currentTags=current.tags.split(",");for(var j=0;j<currentTags.length;j++){if(currentTags[j]!==""&&tabsArr.indexOf(currentTags[j])===-1){tabsArr.push(currentTags[j])}}}tabsArr=tabsArr.map(function(el){var trimmed=el.trim();return{name:trimmed,title:trimmed}})}var tabsList=document.createElement("ul");tabsList.className="cp_tabs_list";var firstLi=null;for(var i=0;i<tabsArr.length;i++){(function(tab,index){var li=document.createElement("li");li.className="cp_tabs_list_item";li.innerHTML=tab.title;li.onclick=function(){if(li.className.indexOf(" active")>-1){return true}if(tab.name.toLowerCase()==="all"){that.doSearch("clear")}else{that.doSearch("search",tab.name,true)}removeActiveClass(tabsList);li.className+=" active"};tabsList.appendChild(li);if(index===0){firstLi=li}})(tabsArr[i],i)}if(firstLi){setTimeout(function(){firstLi.click()},0)}function removeActiveClass(rootElement){var elements=rootElement.getElementsByClassName("cp_tabs_list_item");for(var i=0;i<elements.length;i++){elements[i].className=elements[i].className.replace(/\bactive\b/g,"")}}return tabsList};this.buildSearchDiv=function(){var that=this;var searchCont=document.createElement("div");searchCont.className="ze_search_cont";searchCont.id="ze_search_cont"+this.loaderParams._object;var searchInput=document.createElement("input");searchInput.type="text";searchInput.className="ze_searchBox";searchInput.style.display="none";var searchBtn=document.createElement("a");searchBtn.href="javascript:void(0);";searchBtn.innerHTML="Search";searchBtn.onclick=function(){this.style.display="none";searchInput.style.display="inline-block";searchInput.focus()};var searchInput=document.createElement("input");searchInput.type="text";searchInput.className="ze_searchBox";searchInput.value=(that.MediaJSON&&typeof that.MediaJSON.searchVal!="undefined")?that.MediaJSON.searchVal:"";searchInput.style.display="none";var searchClear=document.createElement("span");searchClear.className="ze_search_clear";searchClear.style.cursor="pointer";searchClear.innerHTML="X";searchClear.style.display="none";searchClear.onclick=function(){this.style.display="none";searchInput.value="";searchInput.style.display="none";searchBtn.style.display="inline-block";that.doSearch("clear")};searchCont.appendChild(searchBtn);searchCont.appendChild(searchInput);searchCont.appendChild(searchClear);searchInput.onkeyup=function(e){if(e.keyCode==27){searchClear.style.display="none";searchInput.value="";searchInput.style.display="none";searchBtn.style.display="inline-block";that.doSearch("clear");return false}searchClear.style.display="inline-block";var value=this.value;if(value.replace(/^\s+|\s+$/g,"")==""){this.setAttribute("data-stop","true")}that.doSearch("search",value)};return searchCont};this.doSearch=function(searchCase,value,byTagOnly){var that=this;if(this.args.iframe=="true"){that=document.getElementById("zeiframe_"+this.loaderParams._object).contentWindow.go}that.orig_json=that.orig_json||that.MediaJSON;if(searchCase=="clear"){delete that.orig_json.searchVal;that.skin.onMediaJSON(that.orig_json);if(that.skin.isready>2){that.skin.start()}}else{function filterarray(t,fun){var len=t.length>>>0;var res=[];var thisp=arguments[1];if(t.sortedByTag){for(var j in t){for(var i=0;i<t[j].length;i++){var val=t[j][i];if(fun.call(thisp,val,i,t)){res.push(val)}}}}else{for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun.call(thisp,val,i,t)){res.push(val)}}}}return res}sortedArray=filterarray(that.orig_json.items,function(element){testValue=value.toLowerCase();if(!byTagOnly){return element.title.toLowerCase().indexOf(testValue)>-1||element.description.toLowerCase().indexOf(testValue)>-1||((typeof element.tags!="undefined")?(element.tags.toLowerCase().indexOf(testValue)>-1):false)}else{return((!element.tags&&testValue==="no-tag")||(testValue!=="no-tag"&&typeof element.tags!="undefined"&&(element.tags.toLowerCase().indexOf(testValue)>-1))?true:false)}});if(value.replace(/^\s+|\s+$/g,"")==""){that.orig_json.searchVal="";that.skin.onMediaJSON(that.orig_json)}else{that.skin.onMediaJSON({description:that.orig_json.description,title:that.orig_json.title,items:sortedArray,searchVal:value})}if(that.skin.isready>2){that.skin.start()}}};this.stripScripts=function(s){s=s.replace(/\%3C/g,"<").replace(/\%3E/g,">");var div=document.createElement("div");div.innerHTML=s;var scripts=div.getElementsByTagName("script");var i=scripts.length;var scripts_block=[];while(i--){scripts_block.push(scripts[i]);scripts[i].parentNode.removeChild(scripts[i])}return{text:div.innerHTML,scripts:scripts_block}};this.buildUpperPanel=function(){var upper_panel="";if(_cp_go_hooks["before-building-upper-panel"]){upper_panel+=_cp_go_hooks["before-building-upper-panel"](this)}if(this.args.allow_search=="yes"){upper_panel+=" <div id='cp-search-div-"+this.loaderParams._object+"'></div> "}if(this.args.allow_download=="original"||this.args.allow_download=="resized"){var url=cincopa._AJAX.replace("/runtimeze/","/runtime/")+"download.aspx?fid="+this.args.fid;upper_panel+=" <a class='cp-download-all-link' href='"+url+"'>Download</a> "}if(this.args.allow_tabs===true||this.args.allow_tabs==="true"){var layout=this.args.allow_tabs_layout||"theme-1";upper_panel+=" <div id='cp-tabs-div-"+this.loaderParams._object+"' class='cp-tabs-div "+layout+"'></div> "}return upper_panel};this.buildLowerPanel=function(){var lower_panel="";var plan_name=this.args.plan_name;if(this.acc&&this.acc.user){plan_name=this.acc.user.plan_name}if(plan_name=="free"){lower_panel='<div style="clear:both;"><a href="//www.cincopa.com/?utm_campaign=viral_pro_skins&afc=mplp1" style="vertical-align: middle;display: inline-block;"><img style="padding:0px;margin:0px;border:0px;width:236px;height:30px;" border=0 alt="Powered By Cincopa" src="'+cincopa._ROOT_LOADER_STATIC+'bycincopa.png" /></a>';lower_panel+='<div style="display: inline-block; vertical-align: middle; margin: 0 .2em 0 1em; position: relative; margin-bottom: 5px;"><div class="g-plusone" data-size="medium" data-href="https://plus.google.com/111463929396015329416"></div></div>';lower_panel+='<iframe allowtransparency="true" frameborder="0" scrolling="no" style="vertical-align: middle;overflow:hidden;border:0px none;width:92px;height:20px;margin-bottom:5px;" src="https://www.facebook.com/plugins/like.php?href='+encodeURIComponent("https://www.facebook.com/cincopa")+'&layout=button_count&show_faces=false&width=100&action=like&font=arial&layout=button_count"></iframe>';lower_panel+="</div>"}return lower_panel};this.setGalleryHTML=function(htm,isIframeCode){this.onSkinEvent("runtime.on-load-html");function buildUpperPanelContent(gal){if(lower_panel!=""){var po=document.createElement("script");po.type="text/javascript";po.async=true;po.src="https://apis.google.com/js/plusone.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(po,s)}if(doc.getElementById("cp-search-div-"+gal.loaderParams._object)){doc.getElementById("cp-search-div-"+gal.loaderParams._object).appendChild(gal.buildSearchDiv())}if(doc.getElementById("cp-tabs-div-"+gal.loaderParams._object)){doc.getElementById("cp-tabs-div-"+gal.loaderParams._object).appendChild(gal.buildTabs(gal))}}var doc=this.detectIframeDocument();var obj=getElement(this.loaderParams._object);if(!this.args.allow_lightbox||this.args.allow_lightbox=="no"){if(this.args.allow_fixpos!="no"){obj.className+=" "+this.args.allow_fixpos}if(this.args.allow_margins){var margin=parseFloat(this.args.allow_margins);obj.style.margin=margin+"px"}}var inner="<div style='width:"+this.args.widget_w+"px;height:"+this.args.widget_h+"px;' id='inner_"+this.loaderParams._object+"' class='cp_reset_style "+(this.iframeParentObject?"cp_iframe":"")+"'>";inner+=htm;inner+="</div><div style='clear:both;'></div>";var upper_panel=this.buildUpperPanel();var lower_panel=this.buildLowerPanel();if(upper_panel!=""){upper_panel="<div class='cp-upper-panel'>"+upper_panel+"</div>"}if(this.iframeParentObject&&!this.galleryFrameLoaded){var ifrm=parent.document.getElementById("zeiframe_"+this.iframeParentObject);if(ifrm!==null){ifrm.style.width=this.args.widget_w?this.args.widget_w+"px":"";ifrm.style.height=this.args.widget_h?this.args.widget_h+"px":""}inner=upper_panel+inner+lower_panel;obj.innerHTML=inner;buildUpperPanelContent(this);this.galleryFrameLoaded=true}else{if(this.galleryFrameLoaded){obj=doc.getElementById("inner_"+this.loaderParams._object);obj.innerHTML=htm}else{if(!isIframeCode){inner=upper_panel+inner+lower_panel;this.galleryFrameLoaded=true}if(obj){obj.innerHTML=inner}else{return}try{cincopa.testtrack(this.uid)}catch(ex){}if(!isIframeCode){buildUpperPanelContent(this)}}}this.onSkinEvent("runtime.on-html-loaded")};this.loadSkinCSS=function(cssname){this.loadjscssfile(this.skinPath+cssname,"css")};this.loadSkinJS=function(jsname){this.loadjscssfile(this.skinPath+jsname,"js","head")};this.loadSkinJSSequence=function(jsnames,callback){var self=this;var ns=[];for(var i=0;i<jsnames.length;i++){var name=jsnames[i];ns.push(this.skinPath+name)}return this.loadScript(ns,callback)};this.loadjscssfile=function(filename,filetype,where,onloadfunc){var fileref;if(_cp_preloaded_files[filename]==true){if(onloadfunc!=null){_trace("preloaded "+filename+"...");onloadfunc()}else{_trace("preloaded (without callback) "+filename+"...")}return}else{_trace("loading "+filename+"...");if(!cincopa.qs.cpdisablepreload&&filename.indexOf("preload.js")==-1&&filename.indexOf("preload.css")==-1&&filename.indexOf("jsonv2.aspx")==-1&&filename.indexOf("libasync_old.js")==-1&&filename.indexOf("json.aspx")==-1){var shortname=filename.split(".cincopa.com");if(shortname.length>1){shortname=shortname[1]}cincopa.logError("preloader_missing7",shortname)}}if(filetype=="js"){fileref=document.createElement("script");fileref.setAttribute("type","text/javascript");var fp=filename;fileref.setAttribute("src",fp);if(typeof onloadfunc!="undefined"){if(fileref.attachEvent){fileref.onreadystatechange=function(){if(fileref.readyState=="loaded"||fileref.readyState=="complete"){onloadfunc()}};fileref.attachEvent("onerror",function(){cincopa.trace("js load error: "+filename)})}else{if(fileref.addEventListener){fileref.addEventListener("load",onloadfunc,false);fileref.addEventListener("error",function(){cincopa.trace("js load error: "+filename)},false)}}}}else{if(filetype=="css"){fileref=document.createElement("link");fileref.setAttribute("rel","stylesheet");fileref.setAttribute("type","text/css");fileref.setAttribute("href",filename)}}if(typeof fileref!="undefined"){if(where=="head"){document.getElementsByTagName("head")[0].appendChild(fileref)}else{document.getElementsByTagName("body")[0].appendChild(fileref)}}};this.loadScript=function(){var self=this;var scripts=[];var callback=null;for(var i=0;i<arguments.length;i++){var v=arguments[i];switch(typeof v){case"string":scripts.push(v);break;case"function":callback=v;break}if(v instanceof Array){for(var n=0;n<v.length;n++){scripts.push(v[n])}}}if(scripts.length==0){if(callback){callback()}return}var script=scripts.shift();this.loadjscssfile(script,"js","body",function(){_trace("LOADED: "+script);self.loadScript(scripts,callback)});return true};this.namedSize=function(w,h){var thumb="small";if(w<=100&&h<=75){thumb="small"}else{if(w<=200&&h<=150){thumb="medium"}else{if(w<=600&&h<=450){thumb="large"}else{thumb="xlarge"}}}return thumb};this.pushEventToGA=function(label){if(this.args.ga_event!="on"){return}try{cincopa.trace("pushEventToGA - "+this.MediaJSON.title+" ("+this.args.fid+") label - "+label);if(typeof parent.window._gaq!="undefined"){parent.window._gaq.push(["_trackEvent","Cincopa Galleries",this.MediaJSON.title+" ("+this.args.fid+")",label])}else{if(typeof parent.window.ga!="undefined"){parent.window.ga("send","event","Cincopa Galleries",this.MediaJSON.title+" ("+this.args.fid+")",label)}else{if(typeof parent.window.__gaTracker!="undefined"){parent.window.__gaTracker("send","event","Cincopa Galleries",this.MediaJSON.title+" ("+this.args.fid+")",label)}}}}catch(ex){}};this.get_video_play_stats=function(eventData){var tmp={current_progress_sec:eventData.second,completion_sec:this.getContentWindow().cincopa.cp_media_hm[eventData.uid][eventData.item.rid].totaluniqueseconds,duration_sec:cincopa.cp_hmsToSecondsOnly(eventData.item.duration)};tmp.completion_percent=Math.ceil(tmp.completion_sec/tmp.duration_sec*100);tmp.current_completion_percent=Math.ceil(tmp.current_progress_sec/tmp.duration_sec*100);return tmp};this.getContentWindow=function(){if(this.args.iframe=="true"){var zeiframe=document.getElementById("zeiframe_"+this.loaderParams._object);if(zeiframe){return zeiframe.contentWindow}}else{return window}};this.detectIframeDocument=function(){var doc=document;if(this.args.iframe=="true"){var zeiframe=document.getElementById("zeiframe_"+this.loaderParams._object);if(zeiframe){var doc=zeiframe.contentDocument;if(doc==undefined||doc==null){doc=zeiframe.contentWindow.document}}}else{try{var iframes=parent.document.getElementsByTagName("iframe");if(iframes!=null){for(var i=0;i<iframes.length;i++){if(iframes[i].getAttribute("data-cincoiframe")==this.args.fid){var doc=iframes[i].contentDocument;if(doc==undefined||doc==null){doc=iframes[i].contentWindow.document}break}}}}catch(ex){}}return doc};this.trackEvent=function(label){this.onSkinEvent("skin."+label.toLowerCase().replace(/ /g,"-"),"obsolete trackEvent() from skin")};this.onSkinEvent=function(name,data){var nspace=name.substr(0,name.indexOf("."));var gallery=this;data=data||{};data.id=gallery.args.fid;data.container_id=gallery.args.id;try{data.uid=gallery.uid}catch(ex){data.uid="unknown"}var wind=window;try{if(parent.location.protocol&&typeof parent.cincopa!=="undefined"){wind=parent.window}}catch(ex){}try{if(wind.cincopa._debug){cincopa.trace("onSkinEvent - "+name,data)}for(var i=0;i<wind.cincopa.registeredFunctions.length;i++){if(wind.cincopa.registeredFunctions[i].filter=="*"){try{eval(wind.cincopa.registeredFunctions[i].func)(name,data,gallery)}catch(ex){cincopa.logException(name,ex)}}else{if(wind.cincopa.registeredFunctions[i].filter.indexOf(name)>-1||wind.cincopa.registeredFunctions[i].filter.indexOf(nspace+".*")>-1){try{eval(wind.cincopa.registeredFunctions[i].func)(name,data,gallery)}catch(ex){cincopa.logException(name,ex)}}}}}catch(ex){cincopa.trace(ex)}};this.isIOS=function(){return navigator.userAgent.indexOf("iPod;")>-1||navigator.userAgent.indexOf("iPhone;")>-1||navigator.userAgent.indexOf("iPad;")>-1};this.isAndroid=function(){return navigator.userAgent.indexOf("Linux; U; Android")>-1};this.isFlash=function(major,minor,build){if(major==null){major=0}if(minor==null){minor=0}if(build==null){build=0}function getFlashVersion(desc){var matches=desc.match(/[\d]+/g);matches.length=3;return matches}var hasFlash=false;var flashVersion;if(navigator.plugins&&navigator.plugins.length){var plugin=navigator.plugins["Shockwave Flash"];if(plugin){hasFlash=true;if(plugin.description){flashVersion=getFlashVersion(plugin.description)}}if(navigator.plugins["Shockwave Flash 2.0"]){hasFlash=true;flashVersion="2.0.0.11"}}else{if(navigator.mimeTypes&&navigator.mimeTypes.length){var mimeType=navigator.mimeTypes["application/x-shockwave-flash"];hasFlash=mimeType&&mimeType.enabledPlugin;if(hasFlash){flashVersion=getFlashVersion(mimeType.enabledPlugin.description)}}else{try{var ax=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");hasFlash=true;flashVersion=getFlashVersion(ax.GetVariable("$version"))}catch(e){try{var ax=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");hasFlash=true;flashVersion="6.0.21"}catch(e){try{var ax=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");hasFlash=true;flashVersion=getFlashVersion(ax.GetVariable("$version"))}catch(e){}}}}}if(major==null||!hasFlash){return hasFlash}if(major<flashVersion[0]||(major==flashVersion[0]&&minor<flashVersion[1])||(major==flashVersion[0]&&minor==flashVersion[1]&&build<=flashVersion[2])){return true}return false};this.getSkin=function(){var zeiframe=document.getElementById("zeiframe_"+this.loaderParams._object);if(zeiframe){return zeiframe.contentWindow.zeGalleryArray.inneriframe.skin}return this.skin};this.reportProblem=function(div_id){var doc=this.detectIframeDocument();var container=doc.getElementById(div_id);var position=window.getComputedStyle(container).getPropertyValue("position");if(position!="fixed"&&position!="absolute"){container.style.position="relative"}var reportDiv=document.createElement("div");reportDiv.className="ze_overlay_placeholder";reportDiv.id="ze_report_placeholder";var reportdivCont=document.createElement("div");reportdivCont.className="ze_overlay_container_div";var reportdivContainerContent=document.createElement("div");reportdivContainerContent.className="ze_overlay_container_report_content";var reportdivForm=document.createElement("div");reportdivForm.className="ze_htmloverlay_report_form";var reportdivFormTitle=document.createElement("p");reportdivFormTitle.className="ze_htmloverlay_report_form_text";reportdivFormTitle.innerHTML="Oops something went wrong? which of these best describes the problem?";var reportdivTextarea=document.createElement("textarea");reportdivTextarea.placeholder="";var reportdivDropdown=document.createElement("select");reportdivDropdown.name="problem_category";var reportdivDropdownOptions=["Video/audio fails to play","Gallery doesn't load at all","Video/audio plays but frequently stutters","Video has poor quality","Image doesn't load","Other"];reportdivDropdown.innerHTML="<option value=''>Choose one</option>";for(var i=0;i<reportdivDropdownOptions.length;i++){reportdivDropdown.innerHTML+="<option value='"+reportdivDropdownOptions[i]+"'>"+reportdivDropdownOptions[i]+"</option>"}var reportdivSendBtn=document.createElement("input");reportdivSendBtn.type="submit";reportdivSendBtn.value="Send";reportdivSendBtn.className="ze_reportProblemCancel";var reportdivCncBtn=document.createElement("input");reportdivCncBtn.type="submit";reportdivCncBtn.value="Cancel";reportdivCncBtn.className="ze_reportProblemSubmit";var reportdivErrorMsg=document.createElement("p");reportdivErrorMsg.className="ze_report_form_error_msg";reportdivErrorMsg.innerHTML="Please select a category";reportdivErrorMsg.style.display="none";reportdivForm.appendChild(reportdivFormTitle);reportdivForm.appendChild(reportdivDropdown);reportdivForm.appendChild(reportdivTextarea);reportdivForm.appendChild(reportdivSendBtn);reportdivForm.appendChild(reportdivCncBtn);reportdivForm.appendChild(reportdivErrorMsg);reportdivContainerContent.appendChild(reportdivForm);reportdivCont.appendChild(reportdivContainerContent);reportDiv.appendChild(reportdivCont);container.appendChild(reportDiv);var eventName=cincopa.hasTouch()?"touchstart":"click";reportdivCncBtn.addEventListener(eventName,function(e){e.preventDefault();e.stopPropagation();reportDiv.outerHTML="";delete reportDiv});reportdivSendBtn.addEventListener(eventName,function(e){e.preventDefault();e.stopPropagation();reportdivErrorMsg.style.display="none";reportdivDropdown.className="";var url="https://www.cincopa.com/media-platform/send-report-email";var details=reportdivTextarea.value?reportdivTextarea.value:"";var problem_category=reportdivDropdown.value?reportdivDropdown.value:"";if(problem_category){var params={http_method:"GET",title:"Report a problem",action:"Report a problem",pagepath:location.href,problem_category:problem_category,details:details};Ajax(url,params,function(res){});reportDiv.outerHTML="";delete reportDiv}else{reportdivErrorMsg.style.display="inline-block";reportdivDropdown.className="problem_error_style"}});reportDiv.addEventListener("contextmenu",function(e){e.preventDefault();e.stopPropagation()})};this.copyLinkAndThumb=function(gal){var doc=this.detectIframeDocument();var text="";var href=location.origin+location.pathname,thumb="https://www.cincopa.com/media-platform/api/thumb.aspx?size=large&fid="+this.loaderParams._fid+"&trs=play",title=gal.args.folder_name;if(location.search){href+=location.search+"&cpembed="+this.loaderParams._fid}else{href+="?cpembed="+this.loaderParams._fid}if(this.loaderParams._fid&&this.loaderParams._fid.indexOf("!")>-1&&!this.loaderParams._fid.startsWith("rrid:")){if(this.MediaJSON.items[0]){title=this.MediaJSON.items[0].title||title}}text+='<p><a href="'+href+'"><img src="'+thumb+'" width="400" height="250" style="width: 400px; height: 250px;"></a></p>';text+='<p><a href="'+href+'">'+title+"</a></p>";cincopa.copyToClipboard(text,doc)};function query(op,params,callback){if(typeof params=="function"){callback=params;params={}}params.fid=self.args.fid;params.logged_user_cred=self.args.logged_user_cred;new Ajax(cincopa._AJAX+op,params,function(r){function json(data){try{return eval("("+data+");")}catch(e){return{error:"Invalid JSON format\n"+data,success:false}}}callback(json(r))})}function pquery(op,params,callback){if(pquery.count===undefined){pquery.count=0}else{pquery.count++}var callback_name="__pquery_temp_callback_"+pquery.count;window[callback_name]=function(){callback.apply(this,arguments);try{delete window[callback_name]}catch(e){window[callback_name]=undefined}};params.callback=callback_name;go.loadScript(op+"?"+params_encode(params));function params_encode(params){var out=[];for(var k in params){var v=params[k];out.push(k+"="+encodeURIComponent(v))}return out.join("&")}}this.merge_json=function(o1,o2,o3){var o={};for(var z in o1){o[z]=o1[z]}for(var z in o2){o[z]=o2[z]}for(var z in o3){o[z]=o3[z]}return o}}function zeOnMediaJSON(d,c){var b=zeGalleryArray[d];b.MediaJSON=c;b.zeOnMediaJSON()}function Ajax(h,d,b){var c=h.match(/http:\/\/([\w\d-\.]+)/);if(c){c=c[0]}if(navigator.userAgent.match(/MSIE/)){g()}else{f()}function g(){var k=new XDomainRequest();k.open("post",h);k.onload=function(){b(k.responseText)};k.send(e(d))}function f(){var m=new XMLHttpRequest();var n="POST";var l="application/x-www-form-urlencoded";if(d.http_method){n=d.http_method;delete d.http_method}if(n.indexOf("_JSON")>-1){d=cincopa.json_stringify(d);n=n.split("_")[0];l="application/json; charset=UTF-8"}else{d=e(d)}if(n=="GET"&&d!=""){h+="?"+d}var k="";if(cincopa.analytics_filter_ip){k+="&analytics_filter_ip="+cincopa.analytics_filter_ip}if(cincopa.analytics_anonymize_ip){k+="&analytics_anonymize_ip="+cincopa.analytics_anonymize_ip}if(k!=""){h+=(h.indexOf("?")>-1?"":"?")+k}m.open(n,h,true);if(n=="POST"||n=="PUT"){m.setRequestHeader("Content-type",l);m.send(d)}else{m.send(null)}m.onreadystatechange=function(){cincopa.trace("Ajax onreadystatechsange "+m.readyState+" "+m.status);if(m.readyState==4){switch(m.status){case 200:case 201:case 204:b(m.responseText);break;default:cincopa.trace("http request failed: "+m.status)}}}}function e(n){var m=[];for(var l in n){var o=n[l];m.push(l+"="+encodeURIComponent(o))}return m.join("&")}}cincopa.measure_what={"libasync.js":{},"widgetasync.aspx":{},"json.aspx":{},"preload.aspx?type=js":{},"preload.aspx?type=css":{}};cincopa.measure_send={url:cincopa.location,d:[]};cincopa.measure_benchmark={src:atob("aHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9jaHJvbWUvYXNzZXRzL2NvbW1vbi9pbWFnZXMvbWFycXVlZS9iZW5lZml0cy00LmpwZw=="),sent:false,ok:false,limit:1200};cincopa.measure_alert=function(){if(!window.performance.getEntries||!window.performance.getEntries){cincopa.trace("performance api isn't supported");return}try{var c=window.performance.getEntries();for(var b in c){if(c[b].name.indexOf(cincopa.measure_benchmark.src)>-1&&!cincopa.measure_benchmark.ok){cincopa.measure_benchmark.ok=c[b].duration<cincopa.measure_benchmark.limit;cincopa.measure_send.benchmark=Math.round(c[b].duration)}else{for(var f in cincopa.measure_what){if(!cincopa.measure_what[f]["found"]&&c[b].name.toString().indexOf(f)>-1&&c[b].duration>8000){cincopa.trace("measure "+f,c[b]);cincopa.measure_what[f]["found"]=true;var e=c[b].name.split(/[\/:]/);cincopa.measure_send.d.push({name:f,dur:Math.round(c[b].duration),proto:e[0],host:e[3]})}}}}if(cincopa.measure_send.d.length>0){if(!cincopa.measure_benchmark.sent){cincopa.send_beacon(cincopa.measure_benchmark.src+"?rand="+Math.random());cincopa.measure_benchmark.sent=true}else{if(cincopa.measure_benchmark.ok){cincopa.trace("sending ",cincopa.json_stringify(cincopa.measure_send));cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/os.aspx?a="+cincopa.json_stringify(cincopa.measure_send));cincopa.measure_send.d=[]}}}}catch(d){}setTimeout(cincopa.measure_alert,5000)};cincopa.cpmeasure=function(){var k=false;try{var d=[];var e=window.performance.getEntries();var c=0;for(var b in e){var h=null;if(e[b].name.toString().indexOf(".cdn.cincopa.com")>-1){h="ec"}else{if(e[b].name.toString().indexOf("preload.aspx?type=js")>-1){h="preloadjs"}else{if(e[b].name.toString().indexOf("preload.aspx?type=css")>-1){h="preloadcss"}else{if(e[b].name.toString().indexOf("widgetasync.aspx")>-1){h="widgetasync"}else{if(e[b].name.toString().indexOf("json.aspx")>-1){h="json"}else{if(e[b].name.toString().indexOf("libasync.js")>-1){h="libasync"}else{if(e[b].name.toString().indexOf(".netdna-ssl.com")>-1){h="nd"}}}}}}}if(h!=null){h=h+(cincopa._ROOT_PROTOCOL=="https:"?"-s":"");var g={};cincopa.trace(e[b]);g.d=Math.round(e[b].domainLookupEnd-e[b].domainLookupStart);g.c=Math.round(e[b].connectEnd-e[b].connectStart);g.rq=Math.round(e[b].responseStart-e[b].requestStart);g.rs=Math.round(e[b].responseEnd-e[b].responseStart);g.z=Math.round(e[b].duration);if(g.d==0&&g.c==0&&g.rq==0&&g.rs==0){continue}if(g.d==0){delete g.d}if(g.c==0){delete g.c}if(g.rq==0){delete g.rq}if(g.rs==0){delete g.rs}if(g.z==0){delete g.z}g.n=h;cincopa.trace("Performance "+cincopa.json_stringify(g));if(g.z>30){d.push(g);c++;if(c>=10){if(k){cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/os.aspx?s="+cincopa.json_stringify(d))}c=0;d=[]}}}}if(k){cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/os.aspx?s="+cincopa.json_stringify(d))}}catch(f){}};cincopa.registerEvent("cincopa.cp_evt_mediaplay","video.*");cincopa.registerEvent("cincopa.cp_evt_mediaplay","audio.*");cincopa.registerEvent("cincopa.cp_evt_mediaplay","chromecast.*");cincopa.cp_evt_mediaplay=function(e,b,d){if((e=="video.load"||e=="audio.load")&&!cincopa.disable_analytics){try{var f="";if(cincopa.location_blocked){f="&setref="+encodeURIComponent(cincopa.location)}var h="unknown";try{h=b.version.name}catch(c){}var g=d.uid;cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/oa.aspx?uid="+g+"&fid=ohit"+b.item.rid+f+"&mtc=rid"+g+",ridtotals|host|sua|cc&mtce=vid_res,"+h)}catch(c){}}if(e=="chromecast.detected"){cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/oa.aspx?uid=stats&fid=stat"+e)}};cincopa.emailgate={skip:function(f){var d=f.detectIframeDocument();var g="ze_htmloverlay_placeholder_"+f.loaderParams._object;var c=d.getElementById(g);if(c){c.style.opacity="0"}var b=d.getElementById(f.loaderParams._object);if(b){setTimeout(function(){cincopa.emailgate.hide(f);b.classList.remove("cp_form_opened_transition")},500)}b.classList.remove("cp_form_opened");var e=document.createEvent("CustomEvent");e.initCustomEvent("resize",true,true);window.dispatchEvent(e)},hide:function(c){var d="ze_htmloverlay_placeholder_"+c.loaderParams._object;var b=c.detectIframeDocument().getElementById(d);if(b){b.innerHTML="";b.style.display="none"}}};cincopa.registerEvent(function(q,m,y){var l="ze_htmloverlay_placeholder_"+y.loaderParams._object;var K=m.overlay.params;var n=y.detectIframeDocument();var g=n.getElementById(l);if(!g){return}var A="";var c,E,I="";if(typeof K=="undefined"){c=true;E=false}else{c=K.allowSkip;E=K.isDefaultForm;I=K.name.replace(/ /g,"_")}var x=K.formFields||[];x=x.sort(function(f,R){return f.displayOrder>R.displayOrder});if(E){A+="<div class='ze_htmloverlay_form'>";if(K.upper_html){A+="<p id='ze_htmloverlay_form_upper'>"+K.upper_html+"</p>"}var M=x.filter(function(f){return f.required===true}).length;var G;for(var B=0;B<x.length;B++){var z=x[B].hidden?"cp-hide":"";if(x[B].label&&x[B].required){G=x[B].label+" *"}else{G=x[B].label}if(x[B].fieldType==="text"){A+="<div data-index='"+B+"' class='ze_htmloverlay_form_wrap "+z+"' id='"+(x[B].name?"ze_htmloverlay_form_wrap_"+x[B].name:"")+"'><label class='text-label' for='"+(x[B].name?"ze_htmloverlay_form_"+x[B].name:"")+"'>"+(G||"")+"</label><input data-name='"+x[B].name+"' data-required='"+x[B].required+"' type='text' id='"+(x[B].name?"ze_htmloverlay_form_"+x[B].name:"")+"' name='"+(x[B].name||"")+"' placeholder='"+(x[B].placeholder||"")+"' value='"+(x[B].defaultValue||"")+"' /></div>"}else{if(x[B].fieldType==="submit"){A+="<div data-index='"+B+"' class='ze_htmloverlay_form_wrap "+z+"' id='"+(x[B].name?"ze_htmloverlay_form_wrap_"+x[B].name:"")+"'><label class='text-label'></label><input type='submit' id='"+(x[B].name?"ze_htmloverlay_form_"+x[B].name:"")+"' name='"+(x[B].name||"")+"' value='"+(x[B].label||"")+"' />"+(M?"<span class='error-message'>Please fill out all required fields</span>":"")+"</div>"}else{if(x[B].fieldType==="textarea"){A+="<div data-index='"+B+"' class='ze_htmloverlay_form_wrap "+z+"' id='"+(x[B].name?"ze_htmloverlay_form_wrap_"+x[B].name:"")+"'><label class='text-label' for='"+(x[B].name?"ze_htmloverlay_form_"+x[B].name:"")+"'>"+(G||"")+"</label><textarea data-name='"+x[B].name+"' data-required='"+x[B].required+"' type='text' id='"+(x[B].name?"ze_htmloverlay_form_"+x[B].name:"")+"' name='"+(x[B].name||"")+"' placeholder='"+(x[B].placeholder||"")+"' >"+(x[B].defaultValue||"")+"</textarea></div>"}else{if(x[B].fieldType==="checkbox"){A+="<div data-index='"+B+"' class='ze_htmloverlay_form_wrap ze_htmloverlay_form_wrap_list "+z+"' id='"+(x[B].name?"ze_htmloverlay_form_wrap_"+x[B].name:"")+"'>";A+="<span>"+(G||"")+"</span>";if(x[B].options){for(var J in x[B].options){A+="<label class='ze_htmloverlay_form_checkbox_wrap'>";A+="<input data-name='"+x[B].name+"' type='checkbox' id='"+(x[B].name?"ze_htmloverlay_form_"+x[B].name+"_"+J:"")+"' name='"+(x[B].name||"")+"' value='"+x[B].options[J].value+"' />";A+="<span>"+x[B].options[J].label+"</span>";A+="</label>"}}A+="</div>"}else{if(x[B].fieldType==="booleancheckbox"){A+="<div data-index='"+B+"' class='ze_htmloverlay_form_wrap ze_htmloverlay_form_wrap_list "+z+"' id='"+(x[B].name?"ze_htmloverlay_form_wrap_"+x[B].name:"")+"'>";A+="<label class='ze_htmloverlay_form_checkbox_wrap'>";A+="<input class='booleancheckbox' data-name='"+x[B].name+"' type='checkbox' data-required='"+x[B].required+"' id='"+(x[B].name?"ze_htmloverlay_form_"+x[B].name:"")+"' name='"+(x[B].name||"")+"' />";A+="<span>"+G||"</span>";A+="</label>";A+="</div>"}else{if(x[B].fieldType==="radio"){A+="<div data-index='"+B+"' class='ze_htmloverlay_form_wrap ze_htmloverlay_form_wrap_list "+z+"' id='"+(x[B].name?"ze_htmloverlay_form_wrap_"+x[B].name:"")+"'>";A+="<span>"+(G||"")+"</span>";if(x[B].options){for(var J=0;J<x[B].options.length;J++){var d="";if((!x[B].defaultValue&&J==0)||(x[B].defaultValue&&x[B].options[J].value===x[B].defaultValue)){d=" checked "}A+="<label class='ze_htmloverlay_form_checkbox_wrap'>";A+="<input data-name='"+x[B].name+"' data-required='"+x[B].required+"' type='radio' id='"+(x[B].name?"ze_htmloverlay_form_"+x[B].name+"_"+J:"")+"' name='"+(x[B].name||"")+"' value='"+x[B].options[J].value+"' "+d+" />";A+="<span>"+x[B].options[J].label+"</span>";A+="</label>"}}A+="</div>"}else{if(x[B].fieldType==="select"){A+="<div data-index='"+B+"' class='ze_htmloverlay_form_wrap ze_htmloverlay_form_wrap_list "+z+"' id='"+(x[B].name?"ze_htmloverlay_form_wrap_"+x[B].name:"")+"'>";A+="<span>"+(G||"")+"</span>";if(x[B].options){A+="<select data-name='"+x[B].name+"' data-required='"+x[B].required+"' id='"+(x[B].name?"ze_htmloverlay_form_"+x[B].name+"_"+J:"")+"' name='"+(x[B].name||"")+"'>";for(var J in x[B].options){A+="<option value='"+x[B].options[J].value+"'>"+x[B].options[J].label+"</option>"}A+="</select>"}A+="</div>"}}}}}}}}if(K.upper_html){A+="<p id='ze_htmloverlay_form_lower'>"+K.lower_html+"</p>"}A+="</div>"}else{A=y.args.html_overlay_html}cincopa.logFeature("emailgate");if(I==""){I="rid"+m.item.rid}if(cincopa.inBetween(document.cookie,"cp_form_"+I+"=",";")=="yes"){return}cincopa.emailgate.hide(y);if(c){var e=document.createElement("a");e.innerHTML="X";e.className="ze_overlay_close_btn";g.appendChild(e);e.onclick=function(){y.onSkinEvent("emailgate.skip",m)}}var h=document.createElement("div");h.className="ze_overlay_container_div "+y.args.html_overlay_fields;var k=document.createElement("div");k.className="ze_overlay_container_div_content";var L=y.stripScripts(A);k.innerHTML=L.text;h.appendChild(k);g.style.opacity="1";g.style.display="block";g.appendChild(h);for(var F=0;F<L.scripts.length;F++){var N=document.createElement("script");N.type="text/javascript";if(L.scripts[F].src){N.src=L.scripts[F].src}N.text=L.scripts[F].text;g.appendChild(N)}var v=g.querySelectorAll(".ze_htmloverlay_form_wrap");for(var u=0;u<v.length;u++){var C=v[u].getAttribute("data-index");C=parseInt(C);var w=x[C].fieldWidth||"100";v[u].style.width=w+"%"}if(E){var P=g.querySelector('input[type="submit"]');var D=g.querySelectorAll("input");var Q=g.querySelectorAll("textarea");var O=g.querySelectorAll("select");var H=Array.prototype.slice.call(D).concat(Array.prototype.slice.call(Q)).concat(Array.prototype.slice.call(O));for(var B=0;B<H.length;B++){if(H[B]){H[B].addEventListener("keydown",function(f){f.stopPropagation()})}}P.addEventListener("click",function(R){R.preventDefault();var V={containerId:l,listId:K.listId};var W=g.querySelectorAll("input[type='text']");var Z=g.querySelectorAll("textarea");var U=g.querySelectorAll("input[type='checkbox']:not(.booleancheckbox)");var T=g.querySelectorAll("input[type='checkbox'].booleancheckbox");var X=g.querySelectorAll("input[type='radio']");var Y=g.querySelectorAll("select");var ad=Array.prototype.slice.call(W).concat(Array.prototype.slice.call(Z)).concat(Array.prototype.slice.call(Y));var ac=Array.prototype.slice.call(U).concat(Array.prototype.slice.call(X));V.values={};var ab=true;for(var aa=0;aa<ad.length;aa++){if(ad[aa]){var ae=ad[aa].getAttribute("data-name");var af=ad[aa].getAttribute("data-required");if(ae){V.values[ae]=ad[aa].value}if(af==="true"){if(!ad[aa].value){ab=false;ad[aa].classList.add("invalid")}else{ad[aa].classList.remove("invalid")}}}}for(var aa=0;aa<ac.length;aa++){if(ac[aa]){var ae=ac[aa].getAttribute("data-name");if(ae&&ac[aa].checked){V.values[ae]=V.values[ae]?V.values[ae]+","+ac[aa].value:ac[aa].value}}}for(var aa=0;aa<T.length;aa++){if(T[aa]){var ae=T[aa].getAttribute("data-name");if(ae){V.values[ae]=T[aa].checked}}}m.formData=V;if(ab){h.classList.remove("with-error-msg");y.onSkinEvent("emailgate.submit",m);var S=new Date();S.setDate(S.getDate()+30);document.cookie="cp_form_"+ae+"=yes; expires="+S.toGMTString();cincopa.emailgate.skip(y)}else{h.classList.add("with-error-msg")}return false},false);var b=n.getElementById(y.loaderParams._object);if(b){b.classList.add("cp_form_opened");b.classList.add("cp_form_opened_transition")}var o=document.createEvent("CustomEvent");o.initCustomEvent("resize",true,true);window.dispatchEvent(o)}},"emailgate.show");cincopa.registerEvent(function(c,b,d){cincopa.emailgate.skip(d)},"emailgate.skip");cincopa.registerEvent(function(c,b,d){cincopa.emailgate.hide(d)},"emailgate.hide");cincopa.registerEvent(function(c,b,g){try{var k=b.formData;cincopa.send_beacon(cincopa._ROOT_LOADER.replace("/runtime","")+"emailgate_ajax.aspx?j="+encodeURIComponent(cincopa.json_stringify(k))+l)}catch(d){}cincopa.logFeature("email-submit",b.uid);if(b.formData.listId==""){return}var n=cincopa._ROOT_LOADER.replace("/runtime","")+"email_integration_ajax.aspx";var h={http_method:"GET",cmd:"addmember",uid:g.uid,listid:b.formData.listId,company:"n/a",mediarid:b.item.rid,mediatitle:b.item.title};for(var e in b.formData.values){h[e]=b.formData.values[e]}if(true){Ajax(n,h,function(f){})}else{}var m={};m.ckid=cincopa.cp_media_sessionid;m.uid=b.uid;m.rid=templastrid;m.hmid=cincopa.cp_media_hm[m.uid][m.rid]["hmid"];m.ud={name:(h.first+" "+h.last).trim(),email:h.email};m.evt={t:"u",s:"eg",p:cincopa.cp_media_hm[m.uid][m.rid]["lastpos"]};if(cincopa.disable_analytics){cincopa.trace("NOT SENDING "+cincopa.json_stringify(m))}else{var l="";if(cincopa.location_blocked){l="&setref="+encodeURIComponent(cincopa.location)}cincopa.trace(cincopa.json_stringify(m));cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/ohm.aspx?j="+encodeURIComponent(cincopa.json_stringify(m))+l)}},"emailgate.submit");cincopa.registerEvent("cincopa.cp_evt_gaevent","runtime.*");cincopa.registerEvent("cincopa.cp_evt_gaevent","skin.*");cincopa.registerEvent("cincopa.cp_evt_gaevent","video.*");cincopa.registerEvent("cincopa.cp_evt_gaevent","audio.*");cincopa.cp_evt_gaevent=function(u,g,m){if(u=="runtime.internal-on-args"){try{if(m.args.override_analytics_load){cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/oa.aspx?uid="+m.args.override_analytics_load.uid+"&fid="+m.args.override_analytics_load.fid+"&setref="+encodeURIComponent(m.args.override_analytics_load.setref))}else{if(m.loaderParams._fid.indexOf("!")==-1){cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/oa.aspx?uid="+m.args.cmapath.replace("%2F","&fid=")+"&setref="+encodeURIComponent(cincopa.location))}else{if(m.args.liveid){cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/oa.aspx?uid="+m.args.cmapath.replace("%2F","&fid=")+"&setref="+encodeURIComponent(cincopa.location))}}}}catch(l){}if(m.args.vast&&m.args.vast!=""){cincopa.logFeature("vast")}if(m.args.prerollAssetID&&m.args.prerollAssetID!=""){if(m.args.extra_assets){m.args.extra_assets+=","+m.args.prerollAssetID}else{m.args.extra_assets=m.args.prerollAssetID}cincopa.logFeature("preroll")}if(m.args.postrollAssetID&&m.args.postrollAssetID!=""){if(m.args.extra_assets){m.args.extra_assets+=","+m.args.postrollAssetID}else{m.args.extra_assets=m.args.postrollAssetID}cincopa.logFeature("postroll")}if(m.uid=="AEDA-4QdaPkM"){try{var x=new Date()-new Date(cincopa.inBetween(document.cookie,"cpAffDataDate=",";")+" GMT+0000");if(x<50000&&x%20<=8){m.args.autostart=true}}catch(l){}}}else{if(u=="runtime.on-media-json"){m.pushEventToGA("gallery.view");if(true){var y=function(d){r="";s="H:M:S".split(":");a=d.split(":");while(p=a.pop()){r=p+s.pop()+r}return"PT"+r};for(var o=0;o<m.MediaJSON.items.length;o++){if(m.MediaJSON.items[o].content_type=="image/jpeg"&&m.MediaJSON.items[o]["versions"]["jpg_1200x900"]){if(true){var q={"@context":"http://schema.org/","@type":"ImageObject"};q["@id"]=m.MediaJSON.items[o].rid;q.name=m.MediaJSON.items[o].title;q.caption=m.MediaJSON.items[o].title;q.description=m.MediaJSON.items[o].description+".";q.thumbnailUrl=m.MediaJSON.items[o]["versions"]["jpg_1200x900"].url;q.uploadDate=m.MediaJSON.items[o].modified;q.publisher="cincopa_bot";var c=cincopa.json_stringify(q);var v=document.createElement("script");v.setAttribute("id","cpjsonld"+m.MediaJSON.items[o].rid);v.setAttribute("type","application/ld+json");try{v.appendChild(document.createTextNode(c))}catch(k){s.text=c}var n=document.getElementsByTagName("head").item(0);n.appendChild(v)}}else{if(m.MediaJSON.items[o].content_type=="video/mp4"&&m.MediaJSON.items[o]["versions"]["jpg_1200x900"]){var q={"@context":"http://schema.org/","@type":"VideoObject"};q["@id"]=m.MediaJSON.items[o].rid;q.duration=y(m.MediaJSON.items[o].duration);q.name=m.MediaJSON.items[o].title;q.description=m.MediaJSON.items[o].description+".";q.thumbnailUrl=m.MediaJSON.items[o]["versions"]["jpg_1200x900"].url;q.uploadDate=m.MediaJSON.items[o].modified;q.publisher="cincopa_bot";var c=cincopa.json_stringify(q);var v=document.createElement("script");v.setAttribute("id","cpjsonld"+m.MediaJSON.items[o].rid);v.setAttribute("type","application/ld+json");try{v.appendChild(document.createTextNode(c))}catch(k){s.text=c}var n=document.getElementsByTagName("head").item(0);n.appendChild(v);try{for(var w=0;w<m.MediaJSON.items[o].extra_files.length;w++){if(m.MediaJSON.items[o].extra_files[w].type.startsWith("subtitle-")){var b=new XMLHttpRequest();b.rid=m.MediaJSON.items[o].rid;b.open("GET",m.MediaJSON.items[o].extra_files[w].url);b.onreadystatechange=function(){function d(e){function A(C){return C.replace(/^\s+|\s+$/g,"")}srt=e.replace(/\r\n|\r|\n/g,"\n");srt=A(srt);var z=srt.split("\n\n");var B="";for(s in z){st=z[s].trim().split("\n");if(st.length>=2){t=st[2];if(st.length>2){for(j=3;j<st.length;j++){t+=" "+st[j]}}B+=t+",\n "}}return B}if(this.readyState===4){txt=d(this.responseText);jsonldx=document.getElementById("cpjsonld"+this.rid);q=cincopa.json_parse(jsonldx.innerHTML);if(q.transcript){q.transcript+="\n\n "+txt}else{q.transcript=txt}jsonldx.innerHTML=cincopa.json_stringify(q)}};b.send()}}}catch(k){}}}}}}else{if((u=="video.play"||u=="audio.play")&&g.item&&g.second==0){m.pushEventToGA(u+" "+g.item.title+" ("+g.item.rid+")")}else{if((u=="video.timeupdate"||u=="audio.timeupdate")&&g.item&&g.item.duration){var h=g.item.duration.split(":");var f=0;for(var o=1;h.length-o>=0;o++){f+=(parseInt(h[h.length-o].split(".")[0])*(Math.pow(60,o-1)))}if(Math.round(f/4)==g.second){m.pushEventToGA(u.split(".")[0]+".play 25% "+g.item.title+" ("+g.item.rid+")")}else{if(Math.round(f/2)==g.second){m.pushEventToGA(u.split(".")[0]+".play 50% "+g.item.title+" ("+g.item.rid+")")}else{if(Math.round(f/4*3)==g.second){m.pushEventToGA(u.split(".")[0]+".play 75% "+g.item.title+" ("+g.item.rid+")")}}}}else{if(u=="video.ended"||u=="audio.ended"){m.pushEventToGA(u.split(".")[0]+".play 100% "+g.item.title+" ("+g.item.rid+")")}}}}}if(u=="runtime.on-media-json"){if(m.args.prerollAssetID&&m.args.prerollAssetID!=""){m.args.prerollVideoUrl=m.MediaJSON.extra[0].content_url;if(m.args.postrollAssetID&&m.args.postrollAssetID!=""){m.args.postrollVideoUrl=m.MediaJSON.extra[1].content_url}}else{if(m.args.postrollAssetID&&m.args.postrollAssetID!=""){m.args.postrollVideoUrl=m.MediaJSON.extra[0].content_url}}}};try{if(parent.window.cp_library_onload){parent.window.cp_library_onload()}}catch(ex){}cincopa.cp_media_sessionid=cincopa.cp_media_sessionid||cincopa.inBetween(document.cookie,"cp_sessionid=",";");if(cincopa.cp_media_sessionid==null){cincopa.cp_media_sessionid=Math.random().toString().substring(2);document.cookie="cp_sessionid="+cincopa.cp_media_sessionid+"; path=/; max-age=157680000"}cincopa.cp_media_hm=cincopa.cp_media_hm||{};cincopa.cp_media_next_commit=null;cincopa.registerEvent("cincopa.cp_evt_media_hm","video.*");cincopa.cp_hmsToSecondsOnly=function(e){if(!e){return""}var c=e.split(":"),d=0,b=1;while(c.length>0){d+=b*parseInt(c.pop(),10);b*=60}return d+(e.indexOf(".")>-1?1:0)};var templastrid="";cincopa.cp_evt_media_hm=function(e,b,c){if(b.item.liveid||c.args.skin_code=="/bgvideo/1"){return}var d=function(){cincopa.cp_media_hm[b.uid]=cincopa.cp_media_hm[b.uid]||{};cincopa.cp_media_hm[b.uid][b.item.rid]=cincopa.cp_media_hm[b.uid][b.item.rid]||{};cincopa.cp_media_hm[b.uid][b.item.rid]["hmid"]=cincopa.cp_media_hm[b.uid][b.item.rid]["hmid"]||((new Date()).getTime()+":"+Math.random().toString().substring(2));cincopa.cp_media_hm[b.uid][b.item.rid]["hm"]=cincopa.cp_media_hm[b.uid][b.item.rid]["hm"]||[];cincopa.cp_media_hm[b.uid][b.item.rid]["dur"]=cincopa.cp_media_hm[b.uid][b.item.rid]["dur"]||cincopa.cp_hmsToSecondsOnly(b.item.duration);cincopa.cp_media_hm[b.uid][b.item.rid]["cap"]=cincopa.cp_media_hm[b.uid][b.item.rid]["cap"]||b.item.title;cincopa.cp_media_hm[b.uid][b.item.rid]["firstsend"]=cincopa.cp_media_hm[b.uid][b.item.rid]["firstsend"]||false;cincopa.cp_media_hm[b.uid][b.item.rid]["lastpos"]=cincopa.cp_media_hm[b.uid][b.item.rid]["lastpos"]||-1;cincopa.cp_media_hm[b.uid][b.item.rid]["commit"]=false;templastrid=b.item.rid};if(e=="video.load"){d();cincopa.cp_send_stats()}else{if((e=="video.timeupdate"&&b.second>0)||(e=="video.play"&&b.second==0)){d();cincopa.cp_media_hm[b.uid][b.item.rid]["commit"]=false;cincopa.cp_media_hm[b.uid][b.item.rid]["hm"][b.second]=(isNaN(cincopa.cp_media_hm[b.uid][b.item.rid]["hm"][b.second])?0:cincopa.cp_media_hm[b.uid][b.item.rid]["hm"][b.second])+1;cincopa.cp_media_hm[b.uid][b.item.rid]["lastpos"]=b.second;if(e=="video.play"||(cincopa.cp_media_next_commit!=null&&cincopa.cp_media_next_commit<(new Date()))){cincopa.cp_send_stats();cincopa.cp_media_next_commit=null}if(cincopa.cp_media_next_commit==null){cincopa.cp_media_next_commit=new Date();cincopa.cp_media_next_commit.setSeconds(cincopa.cp_media_next_commit.getSeconds()+5)}}else{if(e=="video.ended"||e=="video.pause"){cincopa.cp_send_stats();cincopa.cp_media_next_commit=null}}}};cincopa.cp_send_stats=function(){var h={};for(uid in cincopa.cp_media_hm){h.ckid=cincopa.cp_media_sessionid;h.uid=uid;for(rid in cincopa.cp_media_hm[uid]){if(cincopa.cp_media_hm[uid][rid]["commit"]){continue}var k=h;k.hmid=cincopa.cp_media_hm[uid][rid]["hmid"];k.rid=rid;var d=-2;var f=-2;var e=0;cincopa.cp_media_hm[uid][rid].totaluniqueseconds=0;var c="";for(sec in cincopa.cp_media_hm[uid][rid]["hm"]){sec=parseInt(sec);if(isNaN(sec)){continue}cincopa.cp_media_hm[uid][rid].totaluniqueseconds++;if(e!=cincopa.cp_media_hm[uid][rid]["hm"][sec]){if(d>-2){if(f!=d){c+="-"+d}if(e>1){c+=":"+e}}c+=(d>-2?",":"")+sec;f=sec}else{if(d+1<sec){if(f!=d){c+="-"+d}if(e>1){c+=":"+e}c+=(d>-2?",":"")+sec;f=sec}}d=sec;e=cincopa.cp_media_hm[uid][rid]["hm"][sec]}if(cincopa.cp_media_hm[uid][rid].totaluniqueseconds>0){if(f!=d){c+="-"+d}if(e>1){c+=":"+e}k.hm=c;k.prg=cincopa.cp_media_hm[uid][rid].totaluniqueseconds}if(!cincopa.cp_media_hm[uid][rid]["firstsend"]&&cincopa.cp_media_hm[uid][rid].totaluniqueseconds>0){k.name=cincopa.cp_media_hm[uid][rid]["cap"];k.dur=cincopa.cp_media_hm[uid][rid]["dur"];if(cincopa.qs&&cincopa.qs.cpud){try{k.ud=cincopa.json_parse(cincopa.qs.cpud)}catch(b){}}else{if(cincopa.qs&&cincopa.qs.cpeud){try{k.ud=cincopa.json_parse(atob(cincopa.qs.cpeud))}catch(b){}}else{if(cincopa.qs&&(cincopa.qs.cpudemail||cincopa.qs.cpudname||cincopa.qs.cpudaccid)){k.ud={};if(cincopa.qs.cpudemail){k.ud.email=cincopa.qs.cpudemail}if(cincopa.qs.cpudname){k.ud.name=cincopa.qs.cpudname}if(cincopa.qs.cpudaccid){k.ud.acc_id=cincopa.qs.cpudaccid}}else{if(cincopa.hash&&(cincopa.hash.cpudemail||cincopa.hash.cpudname||cincopa.hash.cpudaccid)){k.ud={};if(cincopa.hash.cpudemail){k.ud.email=cincopa.hash.cpudemail}if(cincopa.hash.cpudname){k.ud.name=cincopa.hash.cpudname}if(cincopa.hash.cpudaccid){k.ud.acc_id=cincopa.hash.cpudaccid}}else{if(cincopa.analytics){k.ud=cincopa.analytics}}}}}cincopa.cp_media_hm[uid][rid]["firstsend"]=true}if(cincopa.disable_analytics){cincopa.trace("NOT SENDING "+cincopa.json_stringify(k))}else{var g="";if(cincopa.location_blocked){g="&setref="+encodeURIComponent(cincopa.location)}cincopa.trace(cincopa.json_stringify(k));cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/ohm.aspx?j="+encodeURIComponent(cincopa.json_stringify(k))+g);cincopa.cp_media_hm[uid][rid]["commit"]=true}}}};cincopa.registerEvent(function(eventName,data,gallery){if(data.item.timeline){eval("var timeLineObj = "+cincopa.decodeXml(data.item.timeline));if(typeof timeLineObj.annotation!="undefined"){var annotationArray=cincopa.orderByTime(timeLineObj.annotation)?cincopa.orderByTime(timeLineObj.annotation):[];for(var a in annotationArray){for(var ind=0;ind<annotationArray[a].value.length;ind++){var annotation={index:ind,time:annotationArray[a].time,value:annotationArray[a].value[ind]};data.annotation=annotation;var elem=gallery.detectIframeDocument().getElementById("ze-annotation_"+gallery.loaderParams._object+"_"+annotationArray[a].time+"_"+ind);if(cincopa.cp_hmsToSecondsOnly(annotationArray[a].time)<=data.second&&cincopa.cp_hmsToSecondsOnly(annotationArray[a].value[ind].end)>=data.second){if(elem==null&&!annotationArray[a].value[ind].skipped&&annotationArray[a].value[ind].type!="timeline"){gallery.onSkinEvent("annotation.show",data)}}else{if(elem!=null){gallery.onSkinEvent("annotation.hide",data)}}}}}if(typeof timeLineObj.calltoaction!="undefined"){var cta=cincopa.orderByTime(timeLineObj.calltoaction);for(var ind=0;ind<cta.length;ind++){var time=cta[ind].time=="preroll"||cta[ind].time=="postroll"?cta[ind].time:cincopa.cp_hmsToSecondsOnly(cta[ind].time);if(time==data.second){try{gallery.skin.player.$media[0].pause()}catch(ex){}data.overlay={link:cta[ind].value.link,text:cta[ind].value.desc,time:cta[ind].time};gallery.onSkinEvent("cta.show",data);break}}}}},"video.timeupdate");cincopa.registerEvent(function(eventName,data,gallery){var ctaShowed=false;if(data.item.timeline){eval("var timeLineObj = "+cincopa.decodeXml(data.item.timeline));if(typeof timeLineObj.calltoaction!="undefined"){var cta=cincopa.orderByTime(timeLineObj.calltoaction);for(var ind=0;ind<cta.length;ind++){if(cta[ind].time=="postroll"){data.overlay={link:cta[ind].value.link,text:cta[ind].value.desc,time:cta[ind].time};data.second="postroll";gallery.onSkinEvent("cta.show",data);ctaShowed=true;break}}}}gallery.ctaShowed=ctaShowed},"video.ended");cincopa.registerEvent(function(eventName,data,gallery){if(data.item.timeline){gallery.onSkinEvent("chapter.show",data);data.annotation={type:"timeline"};gallery.onSkinEvent("annotation.show",data);eval("var timeLineObj = "+cincopa.decodeXml(data.item.timeline));if(typeof timeLineObj.calltoaction!="undefined"){var cta=cincopa.orderByTime(timeLineObj.calltoaction);for(var ind=0;ind<cta.length;ind++){if(cta[ind].time=="preroll"){data.overlay={link:cta[ind].value.link,text:cta[ind].value.desc,time:cta[ind].time};gallery.onSkinEvent("cta.show",data);gallery.args.autostart=false;break}}}}},"video.load");cincopa.registerEvent(function(f,d,g){var b=g.detectIframeDocument().getElementById("ze_annotation_placeholder_"+g.loaderParams._object+"_"+g.skin.player.id);if(b){b.innerHTML=""}if(g.skin.player){var h;var c=g.skin.player.controls[0];if(c){h=typeof c.getElementsByClassName("mejs-time-rail")!="undefined"?c.getElementsByClassName("mejs-time-rail")[0]:"";if(h){var e=h.getElementsByClassName("tl_annotation_section");if(e){while(e[0]){e[0].parentNode.removeChild(e[0])}}}}g.onSkinEvent("chapter.hide",d)}},"video.unload");cincopa.registerEvent(function(h,g,k){var f="ze_htmloverlay_placeholder_"+k.loaderParams._object+"_"+k.skin.player.id;var c=k.detectIframeDocument().getElementById(f);if(!c){return}k.onSkinEvent("cta.hide",g);var b=document.createElement("a");b.innerHTML="X";b.className="ze_overlay_close_btn ze_overlay_close_cta";c.appendChild(b);b.onclick=function(){k.onSkinEvent("cta.skip",g)};c.setAttribute("data-time",g.overlay.time);var d=document.createElement("div");d.className="ze_overlay_container_div";var e=document.createElement("div");e.className="ze_overlay_container_div_content";var l=document.createElement("div");l.className="ze_cta_cont";var m=document.createElement("p");m.id="ze_cta_text";m.innerHTML=g.overlay.text;m.onclick=function(){window.open(g.overlay.link,"_blank");g.skipAction="linkclick";k.onSkinEvent("cta.skip",g)};l.appendChild(m);e.appendChild(l);d.appendChild(e);c.style.display="block";c.appendChild(d);cincopa.logFeature("cta")},"cta.show");cincopa.registerEvent(function(d,c,e){var b=e.detectIframeDocument().getElementById("ze_htmloverlay_placeholder_"+e.loaderParams._object+"_"+e.skin.player.id);if(b){b.innerHTML="";b.style.display="none"}},"cta.hide");cincopa.registerEvent(function(eventName,data,gallery){var elem=gallery.detectIframeDocument().getElementById("ze_htmloverlay_placeholder_"+gallery.loaderParams._object+"_"+gallery.skin.player.id);var time=elem.getAttribute("data-time");if(data.skipAction=="linkclick"||time=="preroll"){if(data.item.timeline){eval("var timeLineObj = "+cincopa.decodeXml(data.item.timeline));if(typeof timeLineObj.calltoaction!="undefined"&&typeof timeLineObj.calltoaction[time]!="undefined"){delete timeLineObj.calltoaction[time]}data.item.timeline=cincopa.json_stringify(timeLineObj)}}gallery.onSkinEvent("cta.hide",data);if(typeof gallery.skin.do_play=="function"){gallery.skin.do_play(data)}},"cta.skip");cincopa.registerEvent(function(eventName,data,gallery){var container=gallery.detectIframeDocument().getElementById("ze_annotation_placeholder_"+gallery.loaderParams._object+"_"+gallery.skin.player.id);if(!container){return}if(data.annotation.type=="timeline"){if(gallery.skin.player){var timeRial,timeRialwidth;var controls=gallery.skin.player.controls[0];if(controls){timeRial=typeof controls.getElementsByClassName("mejs-time-rail")!="undefined"?controls.getElementsByClassName("mejs-time-rail")[0]:"";if(timeRial){var timeTotal=typeof timeRial.getElementsByClassName("mejs-time-total")!="undefined"?timeRial.getElementsByClassName("mejs-time-total")[0]:"";if(timeTotal){timeRialwidth=timeTotal.offsetWidth}}}if(timeRial&&timeRialwidth){eval("var timeLineObj = "+cincopa.decodeXml(data.item.timeline));if(typeof timeLineObj.annotation!="undefined"){var annotationArray=cincopa.orderByTime(timeLineObj.annotation)?cincopa.orderByTime(timeLineObj.annotation):[];for(var a in annotationArray){for(var ind=0;ind<annotationArray[a].value.length;ind++){if(annotationArray[a].value[ind].type!="timeline"){continue}var time=annotationArray[a].time;var bgColor=annotationArray[a].value[ind].bgcolor.replace("0x","#");var color=annotationArray[a].value[ind].color.replace("0x","#");var fontSize=annotationArray[a].value[ind].font;var fontStyle=annotationArray[a].value[ind].fontStyle;var duration=cincopa.cp_hmsToSecondsOnly(data.item.duration)||gallery.skin.player.media.duration;var width=gallery.skin.player.media.width*parseInt(annotationArray[a].value[ind].width)/100;var height=gallery.skin.player.media.height*parseInt(annotationArray[a].value[ind].height)/100;var timePxSize=timeRialwidth/duration;var text=annotationArray[a].value[ind].desc;var tlClick="",tlIcon;if(annotationArray[a].value[ind].link){var link=annotationArray[a].value[ind].link;var blank=annotationArray[a].value[ind].blank?"_blank":"_self";tlClick="window.open('"+link+"','"+blank+"')";tlIcon=document.createElement("i");tlIcon.className="ze-annotation-icon"}var sectionLeft=parseInt(cincopa.cp_hmsToSecondsOnly(time))*timePxSize;var sectionInfo=document.createElement("div");sectionInfo.className="ze_tl_annotation_title";sectionInfo.style.fontSize=fontSize;sectionInfo.innerHTML=text;if(fontStyle=="shadow"){sectionInfo.style.fontWeight="bold"}else{if(fontStyle=="shadow"){sectionInfo.style.fontWeight="bold";sectionInfo.style.textShadow="1px 1px 3px rgba(0,0,0,0.6)"}else{if(fontStyle=="italic"){sectionInfo.style.fontStyle="italic"}else{if(fontStyle=="underline"){sectionInfo.style.textDecoration="underline"}}}}var tlSection=document.createElement("div");tlSection.className="tl_annotation_section";tlSection.style.backgroundColor=bgColor;tlSection.style.left=sectionLeft+"px";tlSection.setAttribute("data-time",time);var tlSectionInner=document.createElement("div");tlSectionInner.className="tl_section_annotation_info";tlSectionInner.style.backgroundColor=bgColor;tlSectionInner.style.color=color;tlSectionInner.style.width=width+"px";tlSectionInner.style.height=height+"px";tlSectionInner.appendChild(sectionInfo);if(tlIcon){tlSectionInner.appendChild(tlIcon)}if(tlClick){tlSection.setAttribute("onclick",tlClick)}tlSection.appendChild(tlSectionInner);timeRial.insertBefore(tlSection,timeRial.firstChild)}}}}return}}var containerDiv=document.createElement("div");containerDiv.className="ze-annotation ze-annotation-"+data.annotation.value.type+" ";containerDiv.id="ze-annotation_"+gallery.loaderParams._object+"_"+data.annotation.time+"_"+data.annotation.index;var containerDivContent=document.createElement("div");containerDivContent.className="ze-annotation-text ";if(data.annotation.value.type!="spotlight"){containerDivContent.innerHTML=data.annotation.value.desc}containerDiv.style.top=data.annotation.value.top+"%";containerDiv.style.left=data.annotation.value.left+"%";containerDiv.style.width=data.annotation.value.width+"%";containerDiv.style.height=data.annotation.value.height+"%";containerDiv.style.color=data.annotation.value.color.replace("0x","#");containerDiv.style.fontSize=data.annotation.value.font;if(data.annotation.value.type=="label"){containerDiv.className+="ze-annotation-label-off";containerDiv.onmouseover=function(){this.className=this.className.replace("ze-annotation-label-off","")};containerDiv.onmouseout=function(){if(this.className.indexOf("ze-annotation-label-off")==-1){this.className+="ze-annotation-label-off"}};if(data.annotation.value.bgcolor){containerDiv.style.borderColor=data.annotation.value.bgcolor.replace("0x","#");containerDivContent.style.backgroundColor=data.annotation.value.bgcolor.replace("0x","#")}}else{if(data.annotation.value.type=="note"){var opacityDiv=document.createElement("div");opacityDiv.className="ze-annotation-opacity";if(data.annotation.value.bgcolor){containerDiv.style.borderColor=data.annotation.value.bgcolor.replace("0x","#");opacityDiv.style.backgroundColor=data.annotation.value.bgcolor.replace("0x","#")}containerDiv.appendChild(opacityDiv)}else{if(data.annotation.value.type=="spotlight"){if(data.annotation.value.bgcolor){containerDiv.style.borderColor=data.annotation.value.bgcolor.replace("0x","#")}var spotlightTitle=document.createElement("div");spotlightTitle.className="ze-annotation ze-spotlight-title";spotlightTitle.setAttribute("data-connected",data.annotation.time+"_"+data.annotation.index);spotlightTitle.style.top=data.annotation.value.top_sp+"%";spotlightTitle.style.left=data.annotation.value.left_sp+"%";spotlightTitle.style.width=data.annotation.value.width_sp+"%";spotlightTitle.style.height=data.annotation.value.height_sp+"%";spotlightTitle.style.color=data.annotation.value.color.replace("0x","#");spotlightTitle.style.fontSize=data.annotation.value.font;spotlightTitle.style.display="none";var spotlightTitleContent=document.createElement("div");spotlightTitleContent.className="ze-annotation-text";spotlightTitleContent.innerHTML=data.annotation.value.desc;spotlightTitle.appendChild(spotlightTitleContent);container.appendChild(spotlightTitle);containerDiv.onmouseover=function(){spotlightTitle.style.display="block"};containerDiv.onmouseout=function(){spotlightTitle.style.display="none"}}}}var textCont=data.annotation.value.type=="spotlight"?spotlightTitle:containerDivContent;if(data.annotation.value.fontStyle=="bold"){textCont.style.fontWeight="bold"}else{if(data.annotation.value.fontStyle=="shadow"){textCont.style.fontWeight="bold";textCont.style.textShadow="1px 1px 3px rgba(0,0,0,0.6)"}else{if(data.annotation.value.fontStyle=="italic"){textCont.style.fontStyle="italic"}else{if(data.annotation.value.fontStyle=="underline"){textCont.style.textDecoration="underline"}}}}if(data.annotation.value.link){var link=data.annotation.value.link;var blank=data.annotation.value.blank?"_blank":"_self";var annotationLink=document.createElement("i");annotationLink.className="ze-annotation-icon";containerDiv.style.cursor="pointer";containerDiv.onclick=function(){window.open(link,blank)};if(data.annotation.value.tooltip){var tooltip=document.createElement("span");tooltip.className="ze-annotation-tooltip";tooltip.innerHTML=link;if(typeof data.annotation.value.tooltipColor!="undefined"){tooltip.style.color=data.annotation.value.tooltipColor.replace("0x","#")}if(typeof data.annotation.value.tooltipBgColor!="undefined"){tooltip.style.backgroundColor=data.annotation.value.tooltipBgColor.replace("0x","#")}containerDivContent.onmouseover=function(){this.nextSibling.style.display="inline-block"};containerDivContent.onmouseout=function(){this.nextSibling.style.display="none"}}}var closeBtn=document.createElement("a");closeBtn.className="ze-annotation-close";closeBtn.innerHTML="X";closeBtn.id="ze-annotation-close"+gallery.loaderParams._object+"_"+data.annotation.time+"_"+data.annotation.index;closeBtn.onclick=function(e){e.stopPropagation();var splittedId=this.id.split("_");var time=splittedId[splittedId.length-2];var ind=splittedId[splittedId.length-1];var annotation={index:ind,time:time};data.annotation=annotation;gallery.onSkinEvent("annotation.skip",data)};containerDiv.appendChild(containerDivContent);if(tooltip){containerDiv.appendChild(tooltip)}if(annotationLink){containerDiv.appendChild(annotationLink)}containerDiv.appendChild(closeBtn);container.style.display="block";container.appendChild(containerDiv)},"annotation.show");cincopa.registerEvent(function(f,c,g){var d=g.detectIframeDocument();var b=d.getElementById("ze_annotation_placeholder_"+g.loaderParams._object+"_"+g.skin.player.id);var e=d.getElementById("ze-annotation_"+g.loaderParams._object+"_"+c.annotation.time+"_"+c.annotation.index);var k=false;if((" "+e.className+" ").indexOf(" ze-annotation-spotlight ")>-1){k=true}if(e){b.removeChild(e)}if(k){var l=b.getElementsByClassName("ze-spotlight-title");if(l){for(var h=0;h<l.length;h++){if(l[h].getAttribute("data-connected")==c.annotation.time+"_"+c.annotation.index){b.removeChild(l[h])}break}}}},"annotation.hide");cincopa.registerEvent(function(eventName,data,gallery){var elem=gallery.detectIframeDocument().getElementById("ze-annotation_"+gallery.loaderParams._object+"_"+data.annotation.time+"_"+data.annotation.index);if(data.item.timeline){eval("var timeLineObj = "+cincopa.decodeXml(data.item.timeline));if(typeof timeLineObj.annotation!="undefined"&&typeof timeLineObj.annotation[data.annotation.time]!="undefined"){timeLineObj.annotation[data.annotation.time][data.annotation.index].skipped=true}data.item.timeline=cincopa.json_stringify(timeLineObj)}gallery.onSkinEvent("annotation.hide",data)},"annotation.skip");cincopa.registerEvent(function(eventName,data,gallery){if(gallery.skin.player){var timeRial,timeRialwidth;var controls=gallery.skin.player.controls[0];if(controls){var oldClass=controls.className;controls.className="";timeRial=typeof controls.getElementsByClassName("mejs-time-rail")!="undefined"?controls.getElementsByClassName("mejs-time-rail")[0]:"";if(timeRial){var timeTotal=typeof timeRial.getElementsByClassName("mejs-time-total")!="undefined"?timeRial.getElementsByClassName("mejs-time-total")[0]:"";if(timeTotal){timeRialwidth=timeTotal.offsetWidth}}controls.className=oldClass}if(timeRial&&timeRialwidth){eval("var timeLineObj = "+cincopa.decodeXml(data.item.timeline));if(typeof timeLineObj.chapter!="undefined"&&(typeof gallery.args.tl_storyboard=="undefined"||gallery.args.tl_storyboard=="off")&&gallery.args.chapter){var st_url="";if(data.item.versions&&data.item.versions.jpg_sb_200x150){st_url=data.item.versions.jpg_sb_200x150.url}var chaptersArray=cincopa.orderByTime(timeLineObj.chapter)?cincopa.orderByTime(timeLineObj.chapter):[];for(var ind=0;ind<chaptersArray.length;ind++){var time=chaptersArray[ind].time;var title=chaptersArray[ind]["value"].title||"";var desc=chaptersArray[ind]["value"].desc||"";var duration=cincopa.cp_hmsToSecondsOnly(data.item.duration)||gallery.skin.player.media.duration;var timePxSize=timeRialwidth/duration;var sectionLeft=parseInt(cincopa.cp_hmsToSecondsOnly(time))*timePxSize;var chapterInfo=document.createElement("div");chapterInfo.className="ze_tl_chapter_info";var chapterTitle=document.createElement("span");chapterTitle.className="ze_tl_chapter_title";chapterTitle.innerText=title;var chapterDesc=document.createElement("span");chapterDesc.className="ze_tl_chapter_description";chapterDesc.innerText=desc;if(st_url){var chapterThumb=document.createElement("div");chapterThumb.className="ze_tl_chapter_thumb";chapterInfo.appendChild(chapterThumb);chapterThumb.style.backgroundImage="url("+st_url+")";chapterThumb.style.backgroundRepeat="no-repeat";var sb_w=200,sb_h=150;var aspect_ratio=data.item.aspect_ratio?parseFloat(data.item.aspect_ratio):1.33;var diff=0;if(aspect_ratio>1){var chapterThumbH=sb_w/aspect_ratio;diff=(150-chapterThumbH)/2;chapterThumb.style.height=chapterThumbH+"px"}else{var diff=0;var chapterThumbW=parseInt(sb_h*aspect_ratio);chapterThumb.style.height=sb_h+"px"}var row,col;var frameC=duration<=120?1:(duration>120&&duration<=300?2:(duration>300&&duration<=900?5:10));var frameCount=Math.ceil(duration/frameC);var maxOffset=200;var frameWidth=duration/frameCount;var index=Math.floor(cincopa.cp_hmsToSecondsOnly(time)/frameWidth);if(index<10){col=index}else{col=index%10}row=parseInt(index/10);if(aspect_ratio>1){var positionY=-diff+(-row*sb_h);chapterThumb.style.backgroundPositionX=(-col*sb_w)+"px";chapterThumb.style.backgroundPositionY=positionY+"px"}else{var positionX=-diff+(-col*sb_w);chapterThumb.style.backgroundPositionX=positionX+"px";chapterThumb.style.backgroundPositionY=(-row*sb_h)+"px"}}chapterInfo.appendChild(chapterTitle);chapterInfo.appendChild(chapterDesc);var chapterSection=document.createElement("div");chapterSection.className="ze_tl_chapter_section";chapterSection.setAttribute("data-time",time);chapterSection.appendChild(chapterInfo);chapterSection.style.left=sectionLeft+"px";chapterSection.style.left=sectionLeft*100/timeRialwidth+"%";timeRial.insertBefore(chapterSection,timeRial.firstChild);(function(chapterSection,chapterInfo,timeTotal,time){chapterSection.onmouseover=function(){var chapterInfoWidth=200;var timeRialwidth=timeTotal.offsetWidth;var timePxSize=timeRialwidth/duration;var sectionLeft=parseInt(cincopa.cp_hmsToSecondsOnly(time))*timePxSize;if(timeRialwidth-sectionLeft<chapterInfoWidth){chapterInfo.style.marginLeft=(timeRialwidth-sectionLeft-chapterInfoWidth)+"px"}else{chapterInfo.style.marginLeft=0+"px"}};chapterSection.onclick=function(){if(gallery.playerAPI){gallery.playerAPI.setCurrentTime(parseInt(cincopa.cp_hmsToSecondsOnly(time)))}}})(chapterSection,chapterInfo,timeTotal,time)}}}}},"chapter.show");cincopa.registerEvent(function(f,e,g){var c=g.detectIframeDocument().getElementById("ze_annotation_placeholder_"+g.loaderParams._object+"_"+g.skin.player.id);if(c){c.innerHTML=""}if(g.skin.player){var h;var d=g.skin.player.controls[0];if(d){h=typeof d.getElementsByClassName("mejs-time-rail")!="undefined"?d.getElementsByClassName("mejs-time-rail")[0]:"";if(h){var b=h.getElementsByClassName("ze_tl_chapter_section");if(b){while(b[0]){b[0].parentNode.removeChild(b[0])}}}}}},"chapter.hide");cincopa.registerEvent(function(c,b,d){d.onSkinEvent("chapter.hide",{});d.onSkinEvent("chapter.show",b);if(d.skin&&typeof d.skin.buildChapters=="function"){d.skin.buildChapters(b.item,d.skin.player)}},"chapter.update");cincopa.registerEvent(function(h,d,l){var e=l.detectIframeDocument();var b=e.getElementById(d.containerId||l.loaderParams._object);var u=l.skin.player;var o={fb:"https://www.facebook.com/share.php?u={ADDRESS}",twitter:"https://twitter.com/home?status={ADDRESS}",gplus:"https://plus.google.com/share?url={ADDRESS}",linkedin:"https://www.linkedin.com/shareArticle?mini=true&url={ADDRESS}",pinterest:"https://pinterest.com/pin/create/button/?url={ADDRESS}",email:"mailto:?subject=Cincopa share&body={ADDRESS} shared from Cincopa https://www.cincopa.com"};if(u){var n=u.layers[0];var c=u.controls?u.controls[0]:null;if(!n){return}var D=n.getElementsByClassName("share-layer-wrap");if(D.length>0){D=D[0];var A=D.getElementsByClassName("share-layer");if(A&&A.length>0){A[0].parentNode.removeChild(A[0])}var y=document.createElement("div");y.className="share-layer";y.style.display="block";var x=document.createElement("div");x.className="share-close";var E="";if(l.args.share_url){E=l.args.share_url}else{E=d.share_url}E=encodeURIComponent(E);var g="";if(l.args.embed_code){g='<p class="share-title">Embed</p><p class="share-link embed-link">'+(l.args.embed_url?l.args.embed_url.replace(/>/g,"&gt;").replace(/</g,"&lt;"):"")+"</p>"}var z='<div class="share-wrap"><p class="share-title">Share</p><p class="share-link">'+decodeURIComponent(E)+'</p><ul class="share-icons"><li class="ze_fb"><span class="fb-share" onclick="window.open(\''+o.fb.replace("{ADDRESS}",E)+'\', \'_blank\')"><i class="icon-fb"></i></span></li><li class="ze_tw"><span class="tw-share" onclick="window.open(\''+o.twitter.replace("{ADDRESS}",E)+'\', \'_blank\')"><i class="icon-twitter"></i></span></li><li class="ze_gp"><span class="gp-share" onclick="window.open(\''+o.gplus.replace("{ADDRESS}",E)+'\', \'_blank\')"><i class="icon-gplus"></i></span></li><li class="ze_li"><span class="li-share" onclick="window.open(\''+o.linkedin.replace("{ADDRESS}",E)+'\', \'_blank\')"><i class="icon-linkedin"></i></span></li><li class="ze_pn"><span class="pn-share" onclick="window.open(\''+o.pinterest.replace("{ADDRESS}",E)+'\', \'_blank\')"><i class="icon-pinterest"></i></span></li><li class="ze_em"><span class="em-share" onclick="window.open(\''+o.email.replace("{ADDRESS}",E)+"', '_blank')\"><i class=\"icon-email\"></i></span></li></ul>"+g+"</div>";y.innerHTML=z;y.appendChild(x);D.appendChild(y);var w=D.getElementsByClassName("share-button");if(w.length>0){w=w[0];w.style.display="none"}var f=D.getElementsByClassName("download-button");if(f.length>0){f=f[0];f.style.display="none"}var q=n.getElementsByClassName("mejs-overlay-button");if(q.length>0){q=q[0];q.style.display="none"}if(c&&c.className.indexOf("cp-hide")===-1){c.className+=" cp-hide"}if(b.className.indexOf("shareBlockOpened")==-1){b.className+=" shareBlockOpened"}try{if(u.isFullScreen){u.exitFullScreen()}if(w){if(u.$media[0].paused){w.setAttribute("data-paused","true")}else{w.setAttribute("data-paused","false")}}if(u.media.pluginType!="flash"){u.$media[0].pause()}else{u.pause()}}catch(k){}x.onclick=function(){l.onSkinEvent("share.hide",d)};if(typeof l.shareHandleKeyUp=="undefined"){l.shareHandleKeyUp=function(F){if(F.which==27){l.onSkinEvent("share.hide",d)}}}e.removeEventListener("keyup",l.shareHandleKeyUp,true);e.addEventListener("keyup",l.shareHandleKeyUp,true);function v(F){if("undefined"!=typeof window.getSelection&&"undefined"!=typeof e.createRange){var J=e.defaultView||window;var I=e.createRange();I.selectNodeContents(F);var G=J.getSelection();G.removeAllRanges(),G.addRange(I)}else{if("undefined"!=typeof e.selection&&"undefined"!=typeof e.body.createTextRange){var H=e.body.createTextRange();H.moveToElementText(F),H.select()}}}var C=D.getElementsByClassName("share-link");for(var m=0;m<C.length;m++){var B=C[m];B.onclick=function(){v(B)}}}}},"share.show");cincopa.registerEvent(function(f,d,h){var b=h.detectIframeDocument().getElementById(d.containerId||h.loaderParams._object);var m=h.skin.player;if(m){var k=m.layers[0];var c=m.controls?m.controls[0]:null;if(!k){return}var q=k.getElementsByClassName("share-layer-wrap");if(q.length>0){q=q[0];var o=q.getElementsByClassName("share-layer");if(o&&o.length>0){o=o[0];o.parentNode.removeChild(o)}var n=q.getElementsByClassName("share-button");if(n.length>0){n=n[0];n.style.display="block";if(n&&n.getAttribute("data-paused")!="true"){try{if(m.media.pluginType!="flash"){m.$media[0].play()}else{m.play()}}catch(g){}}}var e=q.getElementsByClassName("download-button");if(e.length>0){e=e[0];e.style.display="block"}var l=k.getElementsByClassName("mejs-overlay-button");if(l.length>0){l=l[0];l.style.display="block"}if(c&&c.className.indexOf("cp-hide")>-1){c.className=c.className.replace(new RegExp("(?:^|\\s)cp-hide(?:\\s|$)")," ")}setTimeout(function(){if(b&&b.className.indexOf("shareBlockOpened")>-1){b.className=b.className.replace(new RegExp("(?:^|\\s)shareBlockOpened(?:\\s|$)")," ")}},200)}}},"share.hide");cincopa.contextMenu=function(f,n,g){var d=g.detectIframeDocument();g.contextMenuTarget=null;var c=d.getElementById("cincopaContextMenus");var o=false,k=false,q=null,m=false;if(c==null){c=d.createElement("div");c.id="cincopaContextMenus",d.body.appendChild(c)}f=cincopa.json_parse(cincopa.json_stringify(f));if(d.getElementById("context"+f)){}else{var b=d.createElement("div");b.id="context"+f;b.className="cp-contextMenu";var u=d.createElement("ul");u.className="cp-contextMenu-dropdown cp-contextMenu-border";for(var h=0;h<n.length;h++){var l=d.createElement("a");if(cincopa.hasTouch()){l.ontouchstart=n[h].callback}else{l.onmousedown=n[h].callback}l.href="javascript:void(0);";l.innerHTML=n[h].title;u.appendChild(l)}b.appendChild(u);if(c!=null){c.appendChild(b)}}var e=d.getElementById(f);if(e!=null){if(!cincopa.hasTouch()){e.addEventListener("contextmenu",function(v){v.preventDefault();v.stopPropagation();k=true;setTimeout(function(){d.getElementById("context"+f).style.display="block";d.getElementById("context"+f).style.left=v.pageX+"px";d.getElementById("context"+f).style.top=v.pageY+"px";g.contextMenuTarget=v.target},70)})}else{e.addEventListener("contextmenu",function(v){v.preventDefault();v.stopPropagation()});e.addEventListener("touchstart",function(v){o=true;q=setTimeout(function(){if(o&&!k){d.getElementById("context"+f).style.display="block";d.getElementById("context"+f).style.left=v.changedTouches[0].pageX+"px";d.getElementById("context"+f).style.top=v.changedTouches[0].pageY+"px";g.contextMenuTarget=v.target;m=true}},1000)});e.addEventListener("touchmove",function(v){clearTimeout(q);o=false});e.addEventListener("touchend",function(v){if(m){v.preventDefault();m=false}clearTimeout(q);o=false})}}if(cincopa.hasTouch()){d.body.addEventListener("touchstart",function(v){if(d.getElementById("context"+f)){setTimeout(function(){d.getElementById("context"+f).style.display="none"},70)}return false},false)}else{d.body.addEventListener("mousedown",function(v){if(d.getElementById("context"+f)){setTimeout(function(){d.getElementById("context"+f).style.display="none"},70)}return false},false)}d.body.addEventListener("focusout",function(v){if(d.getElementById("context"+f)){setTimeout(function(){d.getElementById("context"+f).style.display="none"},70)}})};cincopa.registerEvent(function(f,d,g){var e=d.div_id;var m=true,l=true,k=false;var b="",c="",o="About Cincopa",q="//www.cincopa.com/?afc=rc",n=false;if(g.acc&&g.acc.user){q+=","+g.acc.user.plan_name.substring(0,2)}if(g.args.allow_change_about_cincopa_text&&g.args.allow_change_about_cincopa_text!="Powered by Cincopa"&&g.args.allow_change_about_cincopa_text!="About Cincopa"){b=g.args.allow_change_about_cincopa_text}if(g.args.allow_change_about_cincopa_url&&g.args.allow_change_about_cincopa_url!="//www.cincopa.com"){c=g.args.allow_change_about_cincopa_url}if(g.acc&&g.acc.user&&g.acc.user.features&&g.acc.user.features["skin-hide-right-click-about-cincopa"]&&g.acc.user.features["skin-hide-right-click-about-cincopa"].value=="true"){m=false}if(g.args.right_click=="download"||g.args.right_click_download==true){n=true}if(g.args.right_click_report){l=true}if(g.args.right_click_copy_embed){k=true}l=true;var h=[];if(b){h.push({title:b,callback:function(){window.open(c,"_blank")}})}if(k){h.push({title:"Copy link and thumbnail",callback:function(){g.copyLinkAndThumb(g)}})}if(n){h.push({title:"Download",callback:function(){var u="";if(typeof d.rcd_cb=="function"){u=d.rcd_cb(g.contextMenuTarget)}if(u){window.open(u,"_self")}}})}if(l){h.push({title:"Report a problem",callback:function(){g.reportProblem(e)}})}if(m){h.push({title:o,callback:function(){window.open(q,"_blank")}})}cincopa.contextMenu(e,h,g)},"context_menu.init");cincopa.registerEvent(function(k,h,l){var o=h.type;if(!o||o=="off"){return}var b=l.detectIframeDocument().getElementById(l.loaderParams._object);var m=l.detectIframeDocument().getElementById("big-video-wrap_"+l.loaderParams._object)!==null;if(m){b=l.detectIframeDocument().getElementById("big-video-wrap_"+l.loaderParams._object)}var n=window.getComputedStyle(b).getPropertyValue("position");if(n!="fixed"&&n!="absolute"){b.style.position="relative"}var c;if(o=="button"){c=document.createElement("div");c.className="ze_overlay_button ze_overlay";var g=document.createElement("div");g.className="ze_overlay_button_inner";g.style.color="#"+l.args.overlay_button_text_color;var e=document.createElement("span");e.className="ze_overlay_button_title";e.innerHTML=l.args.overlay_button_title;var d=document.createElement("a");d.innerHTML=l.args.overlay_button_text;d.style.backgroundColor="#"+l.args.overlay_button_color;d.className="ze_overlay_button_button";d.onclick=function(){if(l.args.overlay_link){window.open(l.args.overlay_link,l.args.overlay_target?"_blank":"_self")}};g.appendChild(e);g.appendChild(d);c.appendChild(g)}else{if(o=="watermark"){c=document.createElement("div");c.className="ze_overlay_watermark ze_overlay";var f=document.createElement("img");f.src=l.args.overlay_watermark_url;c.onclick=function(){if(l.args.overlay_link){window.open(l.args.overlay_link,l.args.overlay_target?"_blank":"_self")}};if(l.args.overlay_watermark_position=="bottom_left"){c.style.left=0;c.style.bottom=0}else{if(l.args.overlay_watermark_position=="bottom_right"){c.style.right=0;c.style.bottom=0}else{if(l.args.overlay_watermark_position=="top_left"){c.style.left=0;c.style.top=0}else{if(l.args.overlay_watermark_position=="top_right"){c.style.right=0;c.style.top=0}}}}c.appendChild(f)}else{if(o=="custom"){c=document.createElement("div");c.className="ze_overlay_html ze_overlay";if(l.args.overlay_html){c.innerHTML=l.args.overlay_html}}}}if(c){b.appendChild(c)}},"overlay.show");cincopa.registerEvent(function(e,c,f){var d=c.div_id;var b=f.detectIframeDocument().getElementById(d);if(!b){return}var h=b.getElementsByClassName("ze_overlay");for(var g=0;g<h.length;g++){h[g].parentNode.removeChild(h[g])}},"overlay.hide");cincopa.registerEvent(function(f,e,g){if(typeof g.args.overlay_type=="undefined"||g.args.overlay_type=="off"){return}var c={type:g.args.overlay_type};if(g.args.overlay_time=="onload"){g.onSkinEvent("overlay.show",c)}else{if(g.args.overlay_time=="onclick"){var b=g.detectIframeDocument().getElementById(g.loaderParams._object);if(b){var k=window.getComputedStyle(b).getPropertyValue("position");if(k!="fixed"&&k!="absolute"){b.style.position="relative"}var h=document.createElement("div");h.className="overlay_click_overlay";h.onclick=function(){g.onSkinEvent("overlay.show",c);h.parentNode.removeChild(h)};b.appendChild(h)}}else{if(g.args.overlay_time=="onhover"){var b=g.detectIframeDocument().getElementById(g.loaderParams._object);if(b){b.onmouseenter=function(){g.onSkinEvent("overlay.show",c)};b.onmouseleave=function(){g.onSkinEvent("overlay.hide",{div_id:g.loaderParams._object})}}}else{if(g.args.overlay_time=="at_sec"){var l=parseInt(g.args.overlay_sec);setTimeout(function(){g.onSkinEvent("overlay.show",c)},l*1000)}}}}},"runtime.on-html-loaded");cincopa.registerEvent(function(c,b,d){if(d.args.overlay_type=="poster_logo"){var g=d.skin.player;if(g){var e=g.layers?g.layers[0]:null;if(!e){return}var k=e.getElementsByClassName("mejs-poster");if(k.length>0){k=k[0];if(d.args.overlay_poster_type=="image"&&d.args.overlay_poster_logo_url){k.style.backgroundImage="url("+d.args.overlay_poster_logo_url+")";var h=k.getElementsByTagName("img");if(h.length>0){h=h[0];h.src=d.args.overlay_poster_logo_url}}else{if(d.args.overlay_poster_type=="overlay"){var f=k.getElementsByClassName("ze-mejs-poster-overlay");if(f.length==0){f=document.createElement("div");f.className="ze-mejs-poster-overlay";k.appendChild(f);if(d.args.overlay_poster_overlay_bg){f.style.background="#"+d.args.overlay_poster_overlay_bg;f.style.opacity="0.4"}}}}}}}},"video.load");cincopa.registerEvent(function(e,c,f){var b=cincopa.qs.cpembed||"";if(cincopa.qs.cpembed===f.loaderParams._fid){var d=document.getElementById(f.loaderParams._object);if(d){setTimeout(function(){d.scrollIntoView()},1000)}}},"runtime.on-html-loaded");var sendbuffercount=0;var lastvideoversiontype="";var lastvideosecondregistered=-1;var errortimer=null;cincopa.cp_evt_stats=function(e,b,d){if(b.uid!="AcFA_CB76nb5"&&b.uid!="AcHAO8gYXVgY"){return}if(e=="video.error"){if(b.error_hls&&b.error_hls.details=="manifestParsingError"){try{cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/oa.aspx?uid=videostats&fid=vmerror"+b.uid+"&setref="+encodeURIComponent("http://"+b.item.rid+"/"+cincopa.location.replace("?","--")+"--"+cincopa.short_ua))}catch(c){}}else{if(b.error_hls&&b.error_hls.details=="bufferStalledError"){if(!errortimer){sendbuffercount++;if(sendbuffercount<5){errortimer=setTimeout(function(){cincopa.send_beacon(cincopa._ROOT_ANALYTICS+"/oa.aspx?uid=videostats&fid=vftu"+b.uid+"&setref=evtBuffer"+sendbuffercount+cincopa.short_ua+lastvideoversiontype);errortimer=null;cincopa.trace("errortimer "+sendbuffercount)},2000)}}}}}else{if(e=="video.timeupdate"){try{clearTimeout(errortimer);errortimer=null}catch(c){}lastvideosecondregistered=b.second}}};cincopa.orderByTime=function(e){var d=[];for(var b in e){if(e[b] instanceof Array){var f=[];for(var c=0;c<e[b].length;c++){f.push(e[b][c])}}else{f=e[b]}d.push({time:b,value:f})}d.sort(function(g,h){return cincopa.cp_hmsToSecondsOnly(g.time)-cincopa.cp_hmsToSecondsOnly(h.time)});return d};cincopa.decodeXml=function(b){escaped_one_to_xml_special_map={"&amp;":"&","&quot;":'"',"&lt;":"<","&gt;":">"};return b.replace(/(&quot;|&lt;|&gt;|&amp;)/g,function(d,c){return escaped_one_to_xml_special_map[c]})};setTimeout(cincopa.measure_alert,10000);cincopa.registerEvent("cincopa.cp_track_fail_load","runtime.*");cincopa.cp_track_fail_load=function(d,b,c){if(d=="runtime.internal-on-args"){c.__track_fail_load=setTimeout(function(){cincopa.logError("fail_load","timeout");cincopa.traceit("gallery failed","")},10000)}else{if(d=="runtime.on-html-loaded"){if(c.__track_fail_load){clearTimeout(c.__track_fail_load);c.__track_fail_load=null}}}};cincopa.registerEvent(function(c,b,d){if(b.uid=="AcFA_CB76nb5"||b.uid=="AQDAtmQV2i12"){d.args.allow_change_about_cincopa_url="//www.cincopa.com/he/video-hosting"}if((d.acc&&d.acc.user&&d.acc.user.plan_name=="free"&&d.args.template=="AoIAMJd_cbRb")||cincopa.hash.cpaddlogo){d.args.player_watermark_on_off=true;d.args.player_watermark="//wwwcdn.cincopa.com/_cms/design15/images/cincopa-cs-logo.png";d.args.player_watermark_link="//www.cincopa.com";d.args.new_page=true;cincopa.logError("free_video_player","timeout")}if(d.args&&d.args.player_watermark&&d.args.player_watermark.indexOf("images/acme.png")>-1&&d.args.player_watermark_on_off=="true"){cincopa.logError("old_amce_logo","whatever")}},"runtime.on-args");cincopa.registerEvent(function(d,c,e){if((e.acc.user.plan_name=="free"&&e.args.template=="AoIAMJd_cbRb")||cincopa.hash.cpaddlogo){var g=e.skin.player;if(g){var b=g.controls?g.controls[0]:null;if(!b){return}var f=b.getElementsByClassName("mejs-player-logo-button");if(f&&f.length>0){f=f[0];f.style.width="auto";f.style.height=(b.offsetHeight-20)+"px";f.style.marginTop="8px";f.style.marginBottom="14px";f.style.marginRight="6px"}}}},"video.load");cincopa.concurrency_counter=cincopa.concurrency_counter||{video:0,lastplay:null,sliding_window:[],did_autostart:false};cincopa.registerEvent("cincopa.cp_handle_concurrency","runtime.*");cincopa.registerEvent("cincopa.cp_handle_concurrency","video.*");cincopa.registerEvent("cincopa.cp_handle_concurrency","audio.*");cincopa.cp_handle_concurrency=function(e,c,d){var b=cincopa;if(d.args.iframe==true||d.args.iframe=="true"){var b=window.parent.cincopa}if(e=="runtime.internal-on-args"&&d.args.skin_code=="/mediaelement/1"){b.concurrency_counter.sliding_window.push(Date.now());for(i=0;i<b.concurrency_counter.sliding_window.length;){if(Date.now()-b.concurrency_counter.sliding_window[i]>10000){b.concurrency_counter.sliding_window.shift()}else{i++}}if(b.concurrency_counter.sliding_window.length>2){cincopa.traceit("Cincopa alert - high concurrency detected")}}if(e=="runtime.internal-on-args"&&d.args.skin_code=="/mediaelement/1"&&++b.concurrency_counter.video>2){}else{if(e=="video.play"&&d.args.skin_code=="/mediaelement/1"){if(b.concurrency_counter.lastplay&&b.concurrency_counter.lastplay!=d){b.concurrency_counter.lastplay.playerAPI.pause()}b.concurrency_counter.lastplay=d}}if(e=="runtime.internal-on-args"&&d.args.skin_code=="/mediaelement/1"&&cincopa.hash.autostart=="true"){d.args.autostart="true";d.args.autoStart="true";d.args.video_autoplay="true";b.concurrency_counter.did_autostart=true;cincopa.traceit("Set autostart "+d.args.fid,d)}};cincopa.hubspot_integration=cincopa.hubspot_integration||{};cincopa.cp_hubspot_integration_api_endpoint="https://i974bvx12k.execute-api.us-east-1.amazonaws.com/latest/hubspot/api";cincopa.cp_hubspot_integration=function(g,c,e){if(c.item.liveid||e.args.skin_code=="/bgvideo/1"){return}var f=cincopa.inBetween(document.cookie,"hubspotutk=",";");if(!f){return}var k=null;if(g=="video.timeupdate"||g=="video.play"||g=="video.pause"){var d=cincopa.cp_hmsToSecondsOnly(c.item.duration);var h=Math.round(cincopa.cp_media_hm[c.uid][c.item.rid].totaluniqueseconds/d*100);cincopa.hubspot_integration[c.item.rid]=cincopa.hubspot_integration[c.item.rid]||{lastSentPercent:-1};if(h<=cincopa.hubspot_integration[c.item.rid].lastSentPercent){return}cincopa.hubspot_integration[c.item.rid].lastSentPercent=h;k={http_method:"PUT_JSON",id:cincopa.cp_media_hm[c.uid][c.item.rid]["hmid"],eventTypeId:19189,utk:f,percentWatched:h,mediaId:c.item.id,mediaRid:c.item.rid,mediaTitle:c.item.title,mediaUrl:c.item.content_url,timelineIFrame:{linkLabel:"View video",iframeLabel:c.item.title,iframeUri:"https://api.cincopa.com/v2/analytics.single_heatmap_iframe?api_token=1163760iou04m0qzuvzikzpb3sverp54qwe&date="+(new Date()).toISOString().slice(0,-14)+"&zone=0&hm="+cincopa.cp_media_hm[c.uid][c.item.rid]["hmid"]+"&uid="+c.uid+"&disable_editor=y",width:600,height:650}};cincopa.logFeature("hubspot-event",c.uid)}else{if(g=="emailgate.submit"){k={http_method:"PUT_JSON",id:cincopa.cp_media_hm[c.uid][c.item.rid]["hmid"],eventTypeId:19048,utk:f,mediaId:c.item.id,mediaRid:c.item.rid,mediaTitle:c.item.title,firstName:c.formData.values.firstName||c.formData.values.firstname||c.formData.values.first,lastName:c.formData.values.lastName||c.formData.values.lastname||c.formData.values.last,email:c.formData.values.email};delete k.listId;cincopa.logFeature("hubspot-submit",c.uid)}}if(k&&!cincopa.disable_analytics){var b=43261;Ajax(cincopa.cp_hubspot_integration_api_endpoint+"/integrations/v1/"+b+"/timeline/event?uid="+c.uid,k,function(l){cincopa.trace("hubspot-event",l);if(e.acc&&e.acc.user&&e.acc.user.uid&&e.acc.user.integration&&e.acc.user.integration.hubspot&&e.acc.user.integration.hubspot=="active"&&g=="emailgate.submit"){cincopa.cp_hubspot_integration_get_contact(e.acc.user.uid,function(){if(cincopa.hubspot_integration.last_contact_request){if(((cincopa.hubspot_integration.last_contact_request.properties.email&&cincopa.hubspot_integration.last_contact_request.properties.email.value)||c.formData.values.email)&&cincopa.hubspot_integration.last_contact_request.vid){var m={http_method:"POST_JSON",properties:[]};for(var n in c.formData.values){if(n==="firstName"||n==="firstname"||n==="first"||n==="lastName"||n==="lastname"||n==="last"||n==="email"){continue}m.properties.push({property:n,value:c.formData.values[n]})}Ajax(cincopa.cp_hubspot_integration_api_endpoint+"/contacts/v1/contact/vid/"+cincopa.hubspot_integration.last_contact_request.vid+"/profile?uid="+uid,m,function(o){cincopa.trace("hubspot-event-contact-update",o)})}}})}})}};cincopa.cp_hubspot_integration_get_contact=function(d,b){var c=cincopa.inBetween(document.cookie,"hubspotutk=",";");if(!c){b();return null}Ajax(cincopa.cp_hubspot_integration_api_endpoint+"/contacts/v1/contact/utk/"+c+"/profile?uid="+d,{http_method:"GET"},function(e){e=cincopa.json_parse(e);cincopa.trace("hubspot-contact: ",e);cincopa.hubspot_integration.last_contact_request=e;if(typeof b==="function"){b()}})};cincopa.registerEvent("cincopa.cp_emailgate_event","video.*");cincopa.registerEvent("cincopa.cp_emailgate_event","runtime.*");cincopa.registerEvent("cincopa.cp_emailgate_event","hubspot.load");cincopa.cp_emailgate_event=function(k,c,e){if(e.args.html_overlay_type=="none"||!e.args.html_overlay_type){return}function l(n,o){if(o.length<2){return}n.overlay={params:{allowSkip:e.args.html_overlay_skip==false||e.args.html_overlay_skip=="false"?false:true,isDefaultForm:e.args.html_overlay_type=="form"?true:false,listId:e.args.html_overlay_listid,name:e.args.html_overlay_name,upper_html:e.args.html_overlay_upper,lower_html:e.args.html_overlay_lower,formFields:o}};e.playerAPI.pause();e.onSkinEvent("emailgate.show",n)}function m(n){var o=[];if(e.args.html_overlay_fields=="only_email"){o=o.concat([{name:"email",displayOrder:1,placeholder:"Enter your email address",fieldType:"text",fieldWidth:"75"},{name:"submit",label:"Submit",displayOrder:2,placeholder:"",fieldType:"submit",fieldWidth:"25"}])}else{if(e.args.html_overlay_fields=="not_only_email"){o=o.concat([{name:"first",displayOrder:1,placeholder:"First Name",fieldType:"text",fieldWidth:"50"},{name:"last",displayOrder:2,placeholder:"Family Name",fieldType:"text",fieldWidth:"50"},{name:"email",displayOrder:3,placeholder:"Email Address",fieldType:"text",fieldWidth:"75"},{name:"submit",label:"Submit",displayOrder:4,placeholder:"",fieldType:"submit",fieldWidth:"25"}])}else{if(e.args.html_overlay_fields=="hubspot"){if(e.args.html_overlay_formFields){var q=cincopa.json_parse(e.args.html_overlay_formFields);o=q.fields;var u=o.filter(function(v){return !v.isSmartField||v.name==="submit"});if(e.acc&&e.acc.user&&e.acc.user.uid&&e.acc.user.integration&&e.acc.user.integration.hubspot&&e.acc.user.integration.hubspot=="active"){cincopa.cp_hubspot_integration_get_contact(e.acc.user.uid,function(){if(cincopa.hubspot_integration.last_contact_request&&cincopa.hubspot_integration.last_contact_request.properties){u=u.filter(function(x){return typeof cincopa.hubspot_integration.last_contact_request.properties[x.name]==="undefined"});var v=u.filter(function(x){return x.required}).length;if(u.length==1||!v){var w=o.filter(function(x){return x.isSmartField||x.name==="submit"});w=w.filter(function(x){return typeof cincopa.hubspot_integration.last_contact_request.properties[x.name]==="undefined"});o=w}else{o=u}}l(n,o)});return}else{o=u;l(n,o)}}else{return}}}}l(n,o)}function h(o){var q=false;if(typeof e.args.html_overlay_name!="undefined"){var n=e.args.html_overlay_name||"rid"+o;q=cincopa.inBetween(document.cookie,"cp_form_"+n.replace(/ /g,"_")+"=",";")=="yes"}return q}if(k==="video.load"){if(e.args.html_overlay_show=="before_first"&&!h(c.item.rid)&&!e.showSubscribeFormOnlyOnce){m(c);e.showSubscribeFormOnlyOnce=true}e.showSubscribeForm=true}else{if(k==="video.timeupdate"){if(e.showSubscribeForm&&e.args.html_overlay_show){var d=e.playerAPI.duration();var b=~~e.playerAPI.currentTime();if((e.args.html_overlay_show=="on_25"&&d/4<b)||(e.args.html_overlay_show=="on_50"&&d/2<b)||(e.args.html_overlay_show=="on_75"&&d*3/4<b)||(e.args.html_overlay_show.indexOf("on_at_")>-1&&b>=cincopa.cp_hmsToSecondsOnly(e.args.html_overlay_show.replace("on_at_","")))){e.showSubscribeForm=false;m(c)}}}else{if(k==="video.ended"){var f=e.MediaJSON.items[0].rid===c.item.rid;var g=e.MediaJSON.items[e.MediaJSON.items.length-1].rid===c.item.rid;if(e.args.html_overlay_show=="on_first"&&f&&!h(c.item.rid)){m(c)}else{if(e.args.html_overlay_show=="on_last"&&g&&!h(c.item.rid)){m(c)}else{if(e.args.html_overlay_show=="on_each"&&!h(c.item.rid)){m(c)}}}}else{if(k==="hubspot.load"){m(c)}else{if(k==="runtime.internal-on-args"){if(e.args.html_overlay_disabled=="false"||e.args.html_overlay_disabled==false){e.args.html_overlay_type="none"}if(e.MediaJSON&&e.MediaJSON.items&&e.MediaJSON.items[0]){if(!h(e.MediaJSON.items[0].rid)&&e.args.html_overlay_show=="before_first"){e.args.autostart=false}}}else{if(k==="runtime.on-media-json"){if(e.args){if(!h(e.MediaJSON.items[0].rid)&&e.args.html_overlay_show=="before_first"){e.args.autostart=false}}}}}}}}};cincopa.registerEvent(function(c,b,d){var e=d.loaderParams._object;(function(k){var f=document.getElementById(k);var g;function h(l){return(l.offsetParent===null)}if(f&&h(f)&&!d.hiddenContainerInterval){d.hiddenContainerInterval=setInterval(function(){if(f&&!h(f)){var l=document.createEvent("CustomEvent");l.initCustomEvent("resize",true,true,{action:"hiddenContainer"});window.dispatchEvent(l);clearInterval(d.hiddenContainerInterval)}},1000)}})(e)},"runtime.on-html-loaded");cincopa.registerEvent(function(c,b,d){if(!b.player){return}var e=b.player.layers?b.player.layers[0]:null;if(!e){return}var g=e.getElementsByClassName("mejs-poster");if(g.length>0){g=g[0];if(b.posterURL){g.style.backgroundImage=b.posterURL;var h=g.getElementsByTagName("img");if(h.length>0){h=h[0];h.setAttribute("src",b.posterURL)}else{h=document.createElement("img");h.src=b.posterURL;g.appendChild(h)}}g.style.display="block"}var f=e.getElementsByClassName("mejs-overlay-play");if(f.length>0){f=f[0];f.style.display="block"}},"player.failed");/* memcache */